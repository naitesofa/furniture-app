<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ²™å‘é€‚ç”¨åœºæ™¯ - å®¶é€¸ç”Ÿæ´»</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="../css/common.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            color: #333;
            background-color: #f5f7fa;
            padding-bottom: 80px;
        }
        
        .nav-bar {
            background-color: white;
            border-bottom: 1px solid #e0e0e0;
            height: 50px;
            display: flex;
            align-items: center;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .main-content {
            margin-top: 60px;
            padding: 15px;
        }
        
        .page-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .scene-container {
            max-width: 800px;
            margin: 0 auto;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 600;
            color: #36454f;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .section-title i {
            color: #4aad92;
            margin-right: 8px;
        }
        
        .scene-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 15px;
        }
        
        .scene-tag {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #fff;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            padding: 15px 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            position: relative;
        }
        
        .scene-tag:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-color: #4aad92;
        }
        
        .scene-tag.active {
            background-color: rgba(74, 173, 146, 0.05);
            border-color: #4aad92;
            box-shadow: 0 2px 10px rgba(74, 173, 146, 0.15);
        }
        
        .scene-tag i {
            font-size: 28px;
            color: #4aad92;
            margin-bottom: 10px;
            background-color: rgba(74, 173, 146, 0.1);
            padding: 12px;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        
        .scene-tag:hover i {
            background-color: rgba(74, 173, 146, 0.2);
            transform: scale(1.05);
        }
        
        .scene-tag span {
            font-weight: 500;
            color: #36454f;
        }
        
        .scene-description {
            margin-top: 6px;
            font-size: 12px;
            color: #666;
            line-height: 1.3;
        }
        
        .scene-detail-container {
            margin-top: 20px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px dashed #e0e0e0;
        }
        
        .scene-detail {
            display: none;
        }
        
        .scene-detail.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        .scene-detail-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #4aad92;
            display: flex;
            align-items: center;
        }
        
        .scene-detail-title i {
            margin-right: 8px;
        }
        
        .scene-detail-content {
            line-height: 1.6;
            color: #555;
        }

        .download-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #4aad92;
            font-size: 12px;
            border: 1px solid rgba(74, 173, 146, 0.3);
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .scene-tag:hover .download-btn {
            opacity: 1;
        }
        
        .bottom-actions {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .action-btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .cancel-btn {
            color: #666;
            background-color: #f1f1f1;
        }
        
        .confirm-btn {
            background: linear-gradient(to right, #4aad92, #2c9678);
            color: white;
        }
        
        .modal-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal {
            background: white;
            border-radius: 12px;
            max-width: 90%;
            width: 500px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 20px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-title {
            font-weight: 600;
            font-size: 18px;
            color: #333;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: #999;
        }
        
        .code-block {
            background: #f5f5f5;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            white-space: pre-wrap;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .copy-btn {
            display: inline-block;
            padding: 8px 15px;
            background: #4aad92;
            color: white;
            border-radius: 4px;
            margin-top: 10px;
            cursor: pointer;
            font-size: 14px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @media (max-width: 640px) {
            .scene-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .sofa-type-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* è‡ªå®šä¹‰æ»šåŠ¨æç¤ºåŠ¨ç”» */
        @keyframes scrollHint {
            0% { transform: translateY(0); }
            25% { transform: translateY(10px); }
            50% { transform: translateY(0); }
            75% { transform: translateY(10px); }
            100% { transform: translateY(0); }
        }
        
        .scroll-hint {
            color: #4aad92;
            animation: scrollHint 2s ease-in-out;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 640px) {
            .sofa-type-grid .scene-tag {
                min-width: 150px;
            }
            
            .sofa-preview-img-container {
                height: 100px;
            }
            
            #previewSofaSvg {
                max-width: 200px;
            }
        }
        
        /* åŠŸèƒ½å›¾æ ‡ç‰¹æ®Šæ ·å¼ */
        .function-icon {
            background: linear-gradient(135deg, #f0f7f4, #e6f2ed);
        }
        
        /* æ²™å‘SVGé¢„è§ˆæ ·å¼ - å‚ç›´å¸ƒå±€ï¼Œæ¯å¼ å›¾ç‰‡å ä¸€è¡Œ */
        .sofa-type-grid {
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding: 10px 0;
            overflow-y: auto;
            max-height: 600px;
        }
        
        .sofa-type-grid::-webkit-scrollbar {
            width: 6px;
        }
        
        .sofa-type-grid::-webkit-scrollbar-thumb {
            background-color: rgba(74, 173, 146, 0.3);
            border-radius: 3px;
        }
        
        .sofa-type-grid::-webkit-scrollbar-track {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .sofa-type-grid .scene-tag {
            width: 100%;
            display: flex;
            flex-direction: row;
            align-items: center;
            padding: 15px;
        }
        
        .sofa-preview-img-container {
            width: 150px;
            height: 120px;
            margin: 0 20px 0 0;
        }
        
        .sofa-type-grid .scene-tag .scene-description {
            margin-top: 5px;
        }
        
        /* è°ƒæ•´æ²™å‘é¢„è§ˆå›¾ç‰‡åœ¨å‚ç›´å¸ƒå±€ä¸­çš„æ ·å¼ */
        .sofa-type-grid .scene-tag span {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        /* æ‰‹æœºç«¯å“åº”å¼è°ƒæ•´ */
        @media (max-width: 640px) {
            .sofa-type-grid .scene-tag {
                flex-direction: column;
                text-align: center;
            }
            
            .sofa-preview-img-container {
                width: 90%;
                margin: 10px auto 15px;
            }
        }
        
        /* æ²™å‘é¢„è§ˆå›¾ç‰‡æ”¾å¤§ */
        #previewSofaSvg {
            max-width: 300px;
            height: auto;
            margin: 0 auto;
            transition: transform 0.3s ease;
        }
        
        #svgDownloadModal .text-center:hover #previewSofaSvg {
            transform: scale(1.05);
        }
        
        /* ç¦ç”¨æŒ‰é’®æ ·å¼ */
        .copy-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background-color: #a0aec0;
        }
        
        /* å›¾ç‰‡åŠ è½½æç¤º */
        .loading-text {
            font-style: italic;
            color: #718096;
        }
        
        /* åŠ å¼ºé”™è¯¯æ˜¾ç¤º */
        .error-message {
            color: #e53e3e;
            margin-top: 8px;
            font-size: 0.9rem;
        }
        
        /* æä¾›å¤‡ç”¨ä¸‹è½½æç¤º */
        .alternate-download {
            margin-top: 8px;
            font-size: 0.8rem;
            color: #4a5568;
            font-style: italic;
        }
        
        /* æ¨¡æ€æ¡†æ ·å¼ */
        #svgDownloadModal .text-center {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
        }
        
        .sofa-preview-tag {
            cursor: pointer;
        }
        
        .sofa-type-img {
            max-width: 100%;
            max-height: 100%;
            transition: transform 0.3s ease;
        }
        
        .sofa-preview-tag:hover .sofa-type-img {
            transform: scale(1.1);
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <div class="nav-bar">
        <div class="flex items-center px-4 h-full">
            <a href="javascript:history.back()" class="text-gray-500">
                <i class="fas fa-arrow-left text-lg"></i>
            </a>
            <div class="text-center flex-1 font-medium">æ²™å‘é€‚ç”¨åœºæ™¯</div>
            <div class="w-5"></div><!-- å ä½å…ƒç´ ï¼Œå¹³è¡¡å¸ƒå±€ -->
        </div>
    </div>

    <div class="main-content">
        <div class="page-header">
            <h1 class="text-xl font-bold text-gray-800">æ²™å‘é€‚ç”¨åœºæ™¯é€‰æ‹©</h1>
            <p class="text-sm text-gray-500 mt-2">é€‰æ‹©æ‚¨çš„æ²™å‘ä¸»è¦ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨æ¨èåˆé€‚çš„æ²™å‘ç±»å‹å’Œé¢æ–™</p>
        </div>
        
        <div class="scene-container">
            <div class="section-title">
                <i class="fas fa-home"></i> é€‰æ‹©é€‚ç”¨åœºæ™¯ï¼ˆå¯å¤šé€‰ï¼‰
            </div>
            
            <div class="scene-grid">
                <!-- åŸæœ‰åœºæ™¯ -->
                <div class="scene-tag" data-scene="living-room" data-icon="fa-couch">
                    <button class="download-btn" onclick="showDownloadModal('living-room')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-couch"></i>
                    <span>å®¢å…æ²™å‘</span>
                    <div class="scene-description">æ—¥å¸¸å®¶åº­ä¼‘æ¯å¨±ä¹</div>
                </div>
                
                <div class="scene-tag" data-scene="kids-room" data-icon="fa-child">
                    <button class="download-btn" onclick="showDownloadModal('kids-room')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-child"></i>
                    <span>å„¿ç«¥æˆ¿å®¶å…·</span>
                    <div class="scene-description">é€‚åˆå„¿ç«¥æ´»åŠ¨åŒºåŸŸ</div>
                </div>
                
                <div class="scene-tag" data-scene="pet-friendly" data-icon="fa-paw">
                    <button class="download-btn" onclick="showDownloadModal('pet-friendly')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-paw"></i>
                    <span>å® ç‰©å‹å¥½å‹</span>
                    <div class="scene-description">è€ç£¨é˜²æŠ“è€è„é¢æ–™</div>
                </div>
                
                <!-- æ–°å¢åœºæ™¯ -->
                <div class="scene-tag" data-scene="office-lounge" data-icon="fa-coffee">
                    <button class="download-btn" onclick="showDownloadModal('office-lounge')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-coffee"></i>
                    <span>åŠå…¬ä¼‘æ¯åŒº</span>
                    <div class="scene-description">å•†åŠ¡ä¼‘é—²æ¥å¾…åŒºåŸŸ</div>
                </div>
                
                <div class="scene-tag" data-scene="guest-house" data-icon="fa-bed">
                    <button class="download-btn" onclick="showDownloadModal('guest-house')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-bed"></i>
                    <span>æ°‘å®¿å®¢æˆ¿</span>
                    <div class="scene-description">å…¼å…·èˆ’é€‚ä¸å®ç”¨æ€§</div>
                </div>
                
                <div class="scene-tag" data-scene="small-apartment" data-icon="fa-home">
                    <button class="download-btn" onclick="showDownloadModal('small-apartment')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-home"></i>
                    <span>å°æˆ·å‹å…¬å¯“</span>
                    <div class="scene-description">ç´§å‡‘ç©ºé—´æœ€ä¼˜åŒ–åˆ©ç”¨</div>
                </div>
                
                <div class="scene-tag" data-scene="elderly-friendly" data-icon="fa-wheelchair">
                    <button class="download-btn" onclick="showDownloadModal('elderly-friendly')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-wheelchair"></i>
                    <span>è€äººå‹å¥½å‹</span>
                    <div class="scene-description">æ˜“èµ·èº«é«˜åº¦ä¸æ”¯æ’‘</div>
                </div>
                
                <div class="scene-tag" data-scene="entertainment" data-icon="fa-film">
                    <button class="download-btn" onclick="showDownloadModal('entertainment')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-film"></i>
                    <span>å½±éŸ³å¨±ä¹åŒº</span>
                    <div class="scene-description">èˆ’é€‚è§‚å½±ä½“éªŒä¿éšœ</div>
                </div>
                
                <!-- æ–°å¢åœºæ™¯ï¼šè‡ªç„¶ç¯ä¿ -->
                <div class="scene-tag" data-scene="eco-friendly" data-icon="fa-leaf">
                    <button class="download-btn" onclick="showDownloadModal('eco-friendly')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-leaf"></i>
                    <span>è‡ªç„¶ç¯ä¿</span>
                    <div class="scene-description">ç®€çº¦è‡ªç„¶è£…ä¿®é£æ ¼</div>
                </div>
                
                <!-- æ–°å¢åœºæ™¯ï¼šå¤šåŠŸèƒ½å®¢æˆ¿ -->
                <div class="scene-tag" data-scene="multi-function" data-icon="fa-exchange-alt">
                    <button class="download-btn" onclick="showDownloadModal('multi-function')">
                        <i class="fas fa-download"></i>
                    </button>
                    <i class="fas fa-exchange-alt"></i>
                    <span>å¤šåŠŸèƒ½å®¢æˆ¿</span>
                    <div class="scene-description">éšè—æ‹‰åºŠä¸¤ç”¨è®¾è®¡</div>
                </div>
            </div>
            
            <div class="scene-detail-container">
                <div class="scene-detail" data-detail="living-room">
                    <div class="scene-detail-title"><i class="fas fa-couch"></i>å®¢å…æ²™å‘</div>
                    <div class="scene-detail-content">
                        ä½œä¸ºæ—¥å¸¸èµ·å±…å’Œæ‹›å¾…å®¢äººçš„æ ¸å¿ƒç©ºé—´ï¼Œå®¢å…æ²™å‘éœ€è¦å…¼é¡¾èˆ’é€‚æ€§ä¸ç¾è§‚æ€§ã€‚æ¨èé€‰æ‹©è€ç”¨é¢æ–™ï¼Œé€‚ä¸­è½¯ç¡¬åº¦å’Œåˆé€‚çš„å°ºå¯¸ï¼Œæ—¢èƒ½æ»¡è¶³æ—¥å¸¸ä¼‘æ¯éœ€æ±‚ï¼Œåˆèƒ½é€‚åº”å„ç§ç¤¾äº¤åœºåˆã€‚
                    </div>
                </div>
                
                <div class="scene-detail" data-detail="kids-room">
                    <div class="scene-detail-title"><i class="fas fa-child"></i>å„¿ç«¥æˆ¿å®¶å…·</div>
                    <div class="scene-detail-content">
                        æ”¾ç½®åœ¨å„¿ç«¥æ´»åŠ¨åŒºåŸŸçš„æ²™å‘éœ€è¦ç‰¹åˆ«æ³¨é‡å®‰å…¨å’Œæ˜“æ¸…æ´ç‰¹æ€§ã€‚æ¨èé€‰æ‹©å¯æ‹†æ´—é¢æ–™ï¼Œæ— å°–é”è¾¹è§’è®¾è®¡ï¼Œä¸”å…·æœ‰ä¸€å®šè€ç£¨æ€§èƒ½ï¼Œä»¥åº”å¯¹å­©å­ä»¬çš„å„ç§æ´»åŠ¨å’Œå¯èƒ½çš„æ±¡æ¸ã€‚
                    </div>
                </div>
                
                <div class="scene-detail" data-detail="pet-friendly">
                    <div class="scene-detail-title"><i class="fas fa-paw"></i>å® ç‰©å‹å¥½å‹</div>
                    <div class="scene-detail-content">
                        æœ‰å® ç‰©çš„å®¶åº­éœ€è¦ç‰¹åˆ«è€ç”¨çš„æ²™å‘ã€‚æ¨èé€‰æ‹©é˜²åˆ®è€ç£¨ã€æ˜“æ¸…æ´çš„é¢æ–™ï¼Œå¦‚å¾®çº¤çš®é©æˆ–ç‰¹æ®Šå¤„ç†çš„å¸ƒè‰ºé¢æ–™ï¼ŒåŒæ—¶é¿å…ä½¿ç”¨å®¹æ˜“å‹¾çº¿æˆ–ç§¯ç´¯å® ç‰©æ¯›å‘çš„æè´¨ã€‚
                    </div>
                </div>
                
                <div class="scene-detail" data-detail="office-lounge">
                    <div class="scene-detail-title"><i class="fas fa-coffee"></i>åŠå…¬ä¼‘æ¯åŒº</div>
                    <div class="scene-detail-content">
                        åŠå…¬ç¯å¢ƒä¸­çš„ä¼‘æ¯åŒºæ²™å‘éœ€è¦å…¼é¡¾ä¸“ä¸šå½¢è±¡å’Œèˆ’é€‚åº¦ã€‚æ¨èé€‰æ‹©å•†åŠ¡é£æ ¼è®¾è®¡ï¼Œæ˜“æ¸…æ´ä¸”è€ç”¨çš„é¢æ–™ï¼Œé€‚ä¸­çš„è½¯ç¡¬åº¦å¯ä»¥åœ¨çŸ­æš‚ä¼‘æ¯ä¸­æä¾›è¶³å¤Ÿçš„æ”¯æ’‘å’Œæ”¾æ¾æ•ˆæœã€‚
                    </div>
                </div>
                
                <div class="scene-detail" data-detail="guest-house">
                    <div class="scene-detail-title"><i class="fas fa-bed"></i>æ°‘å®¿å®¢æˆ¿</div>
                    <div class="scene-detail-content">
                        æ°‘å®¿ç¯å¢ƒéœ€è¦é«˜æ•ˆå®ç”¨ä¸”æœ‰ç‰¹è‰²çš„æ²™å‘ã€‚æ¨èé€‰æ‹©å¤šåŠŸèƒ½è®¾è®¡ï¼ˆå¦‚æ²™å‘åºŠï¼‰ï¼Œæ˜“æ¸…æ´é¢æ–™ï¼Œé£æ ¼ä¸Šå¯æ ¹æ®æ°‘å®¿æ•´ä½“å®šä½é€‰æ‹©ä¹¡æ‘ã€ç°ä»£æˆ–åŒ—æ¬§ç­‰ä¸åŒé£æ ¼ã€‚
                    </div>
                </div>
                
                <div class="scene-detail" data-detail="small-apartment">
                    <div class="scene-detail-title"><i class="fas fa-home"></i>å°æˆ·å‹å…¬å¯“</div>
                    <div class="scene-detail-content">
                        å°é¢ç§¯å±…ä½ç©ºé—´éœ€è¦å·§å¦™åˆ©ç”¨æ¯ä¸€å¯¸åŒºåŸŸã€‚æ¨èé€‰æ‹©ä½“ç§¯é€‚ä¸­ã€å‚¨ç‰©åŠŸèƒ½ä¸°å¯Œçš„ç´§å‡‘å‹æ²™å‘ï¼Œå¯è€ƒè™‘è½¬è§’è®¾è®¡æˆ–æ¨¡å—åŒ–ç»„åˆï¼Œæœ€å¤§åŒ–åˆ©ç”¨æœ‰é™ç©ºé—´ã€‚
                    </div>
                </div>
                
                <div class="scene-detail" data-detail="elderly-friendly">
                    <div class="scene-detail-title"><i class="fas fa-wheelchair"></i>è€äººå‹å¥½å‹</div>
                    <div class="scene-detail-content">
                        é€‚åˆè€å¹´äººä½¿ç”¨çš„æ²™å‘éœ€ç‰¹åˆ«æ³¨é‡æ˜“èµ·èº«è®¾è®¡ã€‚æ¨èé€‰æ‹©åº§é«˜ç•¥é«˜ã€åæ„Ÿåç¡¬çš„æ²™å‘ï¼Œå¸¦æ‰¶æ‰‹è®¾è®¡æœ‰åŠ©äºèµ·èº«æ”¯æ’‘ï¼Œé¢æ–™åº”é¿å…å…‰æ»‘æè´¨ï¼Œé˜²æ­¢æ»‘å€’é£é™©ã€‚
                    </div>
                </div>
                
                <div class="scene-detail" data-detail="entertainment">
                    <div class="scene-detail-title"><i class="fas fa-film"></i>å½±éŸ³å¨±ä¹åŒº</div>
                    <div class="scene-detail-content">
                        ä¸“ä¸ºè§‚å½±å’Œæ¸¸æˆè®¾è®¡çš„æ²™å‘éœ€è¦æä¾›é•¿æ—¶é—´çš„èˆ’é€‚ä½“éªŒã€‚æ¨èé€‰æ‹©å¸¦æœ‰å¯è°ƒèŠ‚é èƒŒã€è„šæ‰˜çš„åŠŸèƒ½æ²™å‘ï¼Œæˆ–å‰§é™¢å¼æ’åˆ—çš„ç»„åˆæ²™å‘ï¼Œæä¾›æ²‰æµ¸å¼çš„å¨±ä¹ä½“éªŒã€‚
                    </div>
                </div>
                
                <!-- è‡ªç„¶ç¯ä¿åœºæ™¯è¯¦æƒ… -->
                <div class="scene-detail" data-detail="eco-friendly">
                    <div class="scene-detail-title"><i class="fas fa-leaf"></i>è‡ªç„¶ç¯ä¿</div>
                    <div class="scene-detail-content">
                        è¿½æ±‚è‡ªç„¶ç¯ä¿ç†å¿µçš„å±…ä½ç©ºé—´éœ€é€‰æ‹©ä¸ä¹‹ç›¸åŒ¹é…çš„æ²™å‘ã€‚æ¨èä½¿ç”¨å¯æŒç»­ææ–™å¦‚æœ‰æœºæ£‰ã€äºšéº»ã€ç«¹çº¤ç»´æˆ–å›æ”¶ææ–™åˆ¶æˆçš„æ²™å‘ï¼Œè‰²è°ƒä»¥ç±³è‰²ã€ç°è‰²ã€ç»¿è‰²ç­‰è‡ªç„¶è‰²ä¸ºä¸»ï¼Œç®€çº¦çº¿æ¡è®¾è®¡ä¸è‡ªç„¶è£…ä¿®é£æ ¼ç›¸å¾—ç›Šå½°ã€‚
                    </div>
                </div>
                
                <!-- å¤šåŠŸèƒ½å®¢æˆ¿åœºæ™¯è¯¦æƒ… -->
                <div class="scene-detail" data-detail="multi-function">
                    <div class="scene-detail-title"><i class="fas fa-exchange-alt"></i>å¤šåŠŸèƒ½å®¢æˆ¿</div>
                    <div class="scene-detail-content">
                        é€‚åˆéœ€è¦çµæ´»åˆ©ç”¨ç©ºé—´çš„å®¶åº­ï¼Œæ²™å‘å¯ä»¥åœ¨æ—¥å¸¸ä½œä¸ºæ™®é€šåº§æ¤…ä½¿ç”¨ï¼Œéœ€è¦æ—¶å¯æ‹‰å‡ºéšè—åºŠé“ºæ¥å¾…å®¢äººè¿‡å¤œã€‚æ¨èé€‰æ‹©ç»“æ„ç¨³å›ºã€æ‹‰ä¼¸æœºæ„æµç•…çš„æ‹‰åºŠè®¾è®¡ï¼Œå¹¶é…å¤‡èˆ’é€‚çš„åºŠå«ï¼Œç¡®ä¿å®¢äººæœ‰è‰¯å¥½çš„ç¡çœ ä½“éªŒã€‚
                    </div>
                </div>
                
                <!-- é»˜è®¤æç¤º -->
                <div class="scene-detail active" data-detail="default">
                    <div class="scene-detail-title"><i class="fas fa-info-circle"></i>åœºæ™¯æç¤º</div>
                    <div class="scene-detail-content">
                        è¯·åœ¨ä¸Šæ–¹é€‰æ‹©æ‚¨çš„æ²™å‘ä¸»è¦ä½¿ç”¨åœºæ™¯ï¼Œæˆ‘ä»¬å°†ä¸ºæ‚¨å±•ç¤ºè¯¦ç»†çš„åœºæ™¯ç‰¹ç‚¹å’Œæ²™å‘æ¨èã€‚æ‚¨å¯ä»¥é€‰æ‹©å¤šä¸ªåœºæ™¯ï¼Œæˆ‘ä»¬ä¼šç»¼åˆè€ƒè™‘ä¸ºæ‚¨æ¨èæœ€é€‚åˆçš„æ²™å‘ç±»å‹å’Œé¢æ–™ã€‚ç‚¹å‡»æ¯ä¸ªåœºæ™¯å³ä¸Šè§’çš„ä¸‹è½½å›¾æ ‡å¯è·å–è¯¥åœºæ™¯çš„HTMLä»£ç ã€‚
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ²™å‘é¢„è§ˆå›¾å±•ç¤ºä¸ä¸‹è½½ -->
    <div class="scene-container">
        <div class="section-title">
            <i class="fas fa-couch"></i> æ²™å‘SVGå›¾æ ‡é¢„è§ˆä¸ä¸‹è½½
        </div>
        
        <div class="flex justify-between items-center mb-2">
            <div class="text-sm text-gray-500">
                <i class="fas fa-arrow-down mr-1 scroll-hint"></i> ä¸Šä¸‹æ»šåŠ¨æŸ¥çœ‹æ›´å¤šæ²™å‘æ ·å¼
            </div>
            <div class="text-sm text-primary">
                <i class="fas fa-expand-alt mr-1"></i> ç‚¹å‡»å›¾æ ‡æŸ¥çœ‹å¤§å›¾
            </div>
        </div>
        
        <div class="scene-grid sofa-type-grid">
            <!-- å•äººä½æ²™å‘ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="single">
                <button class="download-btn" onclick="downloadSofaSvg('single')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/single.svg" alt="å•äººä½æ²™å‘" class="sofa-type-img">
                </div>
                <span>å•äººä½æ²™å‘</span>
                <div class="scene-description">é€‚åˆå°æˆ·å‹/ä¹¦æˆ¿</div>
            </div>
            
            <!-- åŒäººä½æ²™å‘ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="double">
                <button class="download-btn" onclick="downloadSofaSvg('double')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/double.svg" alt="åŒäººä½æ²™å‘" class="sofa-type-img">
                </div>
                <span>åŒäººä½æ²™å‘</span>
                <div class="scene-description">é€‚åˆ15-20ã¡å®¢å…</div>
            </div>
            
            <!-- ä¸‰äººä½æ²™å‘ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="triple">
                <button class="download-btn" onclick="downloadSofaSvg('triple')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/triple.svg" alt="ä¸‰äººä½æ²™å‘" class="sofa-type-img">
                </div>
                <span>ä¸‰äººä½æ²™å‘</span>
                <div class="scene-description">é€‚åˆ20-25ã¡å®¢å…</div>
            </div>
            
            <!-- å››äººä½æ²™å‘ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="quad">
                <button class="download-btn" onclick="downloadSofaSvg('quad')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/quad.svg" alt="å››äººä½æ²™å‘" class="sofa-type-img">
                </div>
                <span>å››äººä½æ²™å‘</span>
                <div class="scene-description">é€‚åˆ25ã¡ä»¥ä¸Šå®¢å…</div>
            </div>
            
            <!-- ä¸‰äººä½+å·¦å¦ƒä½æ²™å‘ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="triple-left">
                <button class="download-btn" onclick="downloadSofaSvg('triple-left')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/triple-left.svg" alt="3+å³å¦ƒä½æ²™å‘" class="sofa-type-img">
                </div>
                <span>3+å³å¦ƒä½æ²™å‘</span>
                <div class="scene-description">é€‚åˆLå‹ç©ºé—´</div>
            </div>
            
            <!-- ä¸‰äººä½+å³å¦ƒä½æ²™å‘ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="triple-right">
                <button class="download-btn" onclick="downloadSofaSvg('triple-right')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/triple-right.svg" alt="3+å·¦å¦ƒä½æ²™å‘" class="sofa-type-img">
                </div>
                <span>3+å·¦å¦ƒä½æ²™å‘</span>
                <div class="scene-description">é€‚åˆLå‹ç©ºé—´</div>
            </div>
            
            <!-- å•äººä½éšè—æ‹‰åºŠ æ”¹ä¸ºå•äººåºŠ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="single-pullout">
                <button class="download-btn" onclick="downloadSofaSvg('single-pullout')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/single-pullout.svg" alt="å•äººä½æ‹‰åºŠ" class="sofa-type-img">
                </div>
                <span>å•äººä½æ‹‰åºŠ</span>
                <div class="scene-description">é€‚åˆå°å‹å®¢æˆ¿/ä¹¦æˆ¿</div>
            </div>
            
            <!-- åŒäººä½éšè—æ‹‰åºŠ æ”¹ä¸ºåŒäººåºŠ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="double-pullout">
                <button class="download-btn" onclick="downloadSofaSvg('double-pullout')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/double-pullout.svg" alt="åŒäººä½æ‹‰åºŠ" class="sofa-type-img">
                </div>
                <span>åŒäººä½æ‹‰åºŠ</span>
                <div class="scene-description">é€‚åˆä¸­å‹å®¢æˆ¿/ä¹¦æˆ¿</div>
            </div>
            
            <!-- ä¸‰äººä½éšè—æ‹‰åºŠ æ”¹ä¸ºä¸‰äººåºŠ -->
            <div class="scene-tag sofa-preview-tag" data-sofa-type="triple-pullout">
                <button class="download-btn" onclick="downloadSofaSvg('triple-pullout')">
                    <i class="fas fa-download"></i>
                </button>
                <div class="sofa-preview-img-container">
                    <img src="../img/sofa-types/triple-pullout.svg" alt="ä¸‰äººä½æ‹‰åºŠ" class="sofa-type-img">
                </div>
                <span>ä¸‰äººä½æ‹‰åºŠ</span>
                <div class="scene-description">é€‚åˆå¤§å‹å®¢å…/ä¼šå®¢å…</div>
            </div>
        </div>
        
        <!-- åºŠå‹è¯´æ˜ æ›¿æ¢åŸæ‹‰åºŠåŠŸèƒ½è¯´æ˜ -->
        <div class="bg-blue-50 p-4 rounded-lg mt-4 mb-4">
            <div class="flex items-center mb-2">
                <i class="fas fa-info-circle text-blue-500 mr-2"></i>
                <h3 class="text-md font-medium text-blue-700">æ‹‰åºŠåŠŸèƒ½è¯´æ˜</h3>
            </div>
            <p class="text-sm text-gray-600">
                æ‹‰åºŠæ²™å‘æ˜¯ä¸€ç§å¤šåŠŸèƒ½å®¶å…·ï¼Œå¹³æ—¶å¯ä½œä¸ºæ™®é€šæ²™å‘ä½¿ç”¨ï¼Œéœ€è¦æ—¶å¯æ‹‰å‡ºéšè—çš„åºŠæ¶éƒ¨åˆ†ï¼Œå¿«é€Ÿè½¬å˜ä¸ºä¸´æ—¶åºŠé“ºã€‚
                æ‹‰åºŠæœºæ„é€šå¸¸éšè—åœ¨æ²™å‘åº§ä½ä¸‹æ–¹ï¼Œæ‹‰å‡ºæ—¶ä¼šæœ‰é¢å¤–çš„æ”¯æ’‘è…¿ç¡®ä¿ç¨³å›ºæ€§ã€‚è¿™ç§è®¾è®¡ç‰¹åˆ«é€‚åˆç©ºé—´æœ‰é™çš„å°æˆ·å‹æˆ–éœ€è¦ä¸´æ—¶å®¢åºŠçš„å®¶åº­ï¼Œ
                æ—¢èŠ‚çœç©ºé—´åˆå…¼å…·å®ç”¨æ€§ï¼Œæ˜¯ç°ä»£å®¶å±…çš„ç†æƒ³é€‰æ‹©ã€‚
            </p>
        </div>

        <div class="scene-detail-container">
            <div class="scene-detail active" data-detail="sofa-preview-info">
                <div class="scene-detail-title"><i class="fas fa-info-circle"></i>SVGå›¾æ ‡è¯´æ˜</div>
                <div class="scene-detail-content">
                    è¿™äº›æ²™å‘SVGå›¾æ ‡å¯ç”¨äºæ‚¨çš„ç½‘ç«™ã€æ¼”ç¤ºæ–‡ç¨¿æˆ–è®¾è®¡é¡¹ç›®ã€‚ç‚¹å‡»å„å›¾æ ‡å³ä¸Šè§’çš„ä¸‹è½½æŒ‰é’®å³å¯è·å–è¯¥SVGæ–‡ä»¶ã€‚è¿™äº›å›¾æ ‡å…·æœ‰æ¸…æ™°çš„çº¿æ¡å’Œç®€çº¦çš„é£æ ¼ï¼Œé€‚åˆå„ç§è®¾è®¡åœºæ™¯ã€‚SVGæ ¼å¼å¯ä»¥æ— æŸç¼©æ”¾åˆ°ä»»æ„å°ºå¯¸ã€‚
                </div>
            </div>
        </div>
    </div>
    
    <!-- æ²™å‘SVGä¸‹è½½æ¨¡æ€æ¡† -->
    <div class="modal-backdrop" id="svgDownloadModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">ä¸‹è½½æ²™å‘SVGå›¾æ ‡</div>
                <button class="close-btn" onclick="closeSvgModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <strong id="sofaTypeName">æ²™å‘ç±»å‹</strong>
                    <p class="text-sm text-gray-500 mt-1" id="sofaTypeDescription">é€‚ç”¨åœºæ™¯æè¿°</p>
                </div>
                
                <div class="text-center mb-4 p-6 bg-gray-50 rounded-lg">
                    <img id="previewSofaSvg" src="" alt="æ²™å‘é¢„è§ˆ" style="max-width: 100%; margin: 0 auto;">
                </div>
                
                <div class="mb-4">
                    <h3 class="text-md font-medium mb-2">SVG ä»£ç </h3>
                    <div class="code-block" id="svgCode"></div>
                    <div class="flex gap-2 mt-2">
                        <button class="copy-btn" onclick="copyToClipboard('svgCode')">
                            <i class="fas fa-copy mr-1"></i> å¤åˆ¶SVGä»£ç 
                        </button>
                        <button class="copy-btn" style="background-color: #4361ee;" onclick="downloadSofaSvgFile()">
                            <i class="fas fa-download mr-1"></i> ä¸‹è½½SVGæ–‡ä»¶
                        </button>
                    </div>
                    <div class="alternate-download mt-2">
                        <i class="fas fa-info-circle mr-1"></i> æç¤ºï¼šå¦‚æœä¸‹è½½æŒ‰é’®æ— æ•ˆï¼Œæ‚¨ä¹Ÿå¯ä»¥å³é”®ç‚¹å‡»ä¸Šæ–¹é¢„è§ˆå›¾ï¼Œé€‰æ‹©"å›¾ç‰‡å¦å­˜ä¸º..."
                    </div>
                </div>
                
                <div class="bg-gray-50 p-3 rounded-lg text-sm text-gray-600 mb-2">
                    <p><i class="fas fa-info-circle mr-1 text-blue-500"></i> SVGå›¾æ ‡å¯ä»¥æ— æŸç¼©æ”¾ï¼Œé€‚ç”¨äºç½‘é¡µè®¾è®¡ã€æ‰“å°ææ–™å’Œç§»åŠ¨åº”ç”¨ç­‰ã€‚</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- åº•éƒ¨æ“ä½œæ  -->
    <div class="bottom-actions">
        <button class="action-btn cancel-btn" onclick="history.back()">
            <i class="fas fa-arrow-left mr-1"></i> è¿”å›
        </button>
        <button class="action-btn confirm-btn" onclick="window.location.href='sofa-custom.html'">
            <i class="fas fa-check mr-1"></i> ç¡®è®¤é€‰æ‹©åœºæ™¯
        </button>
    </div>
    
    <!-- ä¸‹è½½ä»£ç æ¨¡æ€æ¡† -->
    <div class="modal-backdrop" id="downloadModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">ä¸‹è½½åœºæ™¯ä»£ç </div>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <strong id="sceneName">åœºæ™¯åç§°</strong>
                    <p class="text-sm text-gray-500 mt-1" id="sceneDescription">åœºæ™¯æè¿°</p>
                </div>
                
                <div class="mb-4">
                    <h3 class="text-md font-medium mb-2">HTML ä»£ç  (å«æ ·å¼)</h3>
                    <div class="code-block" id="htmlCode"></div>
                    <div class="flex gap-2 mt-2">
                        <button class="copy-btn" onclick="copyToClipboard('htmlCode')">
                            <i class="fas fa-copy mr-1"></i> å¤åˆ¶ä»£ç 
                        </button>
                        <button class="copy-btn" style="background-color: #4361ee;" onclick="downloadHtmlFile()">
                            <i class="fas fa-download mr-1"></i> ä¸‹è½½HTMLæ–‡ä»¶
                        </button>
                    </div>
                </div>

                <div class="mb-4">
                    <h3 class="text-md font-medium mb-2">å¯Œæ–‡æœ¬ç‰ˆæœ¬ (æ— éœ€Font Awesome)</h3>
                    <div class="code-block" id="richTextCode"></div>
                    <div class="flex gap-2 mt-2">
                        <button class="copy-btn" onclick="copyToClipboard('richTextCode')">
                            <i class="fas fa-copy mr-1"></i> å¤åˆ¶å¯Œæ–‡æœ¬ä»£ç 
                        </button>
                    </div>
                    <p class="text-xs text-gray-500 mt-2">
                        * æ­¤ç‰ˆæœ¬ä½¿ç”¨Unicodeç¬¦å·æ›¿ä»£Font Awesomeå›¾æ ‡ï¼Œé€‚åˆæ’å…¥Wordã€å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç­‰
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const sceneTags = document.querySelectorAll('.scene-tag');
            const sceneDetails = document.querySelectorAll('.scene-detail');
            const defaultDetail = document.querySelector('.scene-detail[data-detail="default"]');
            
            // åœºæ™¯æ•°æ®
            const sceneData = {
                'living-room': {
                    name: 'å®¢å…æ²™å‘',
                    icon: 'fa-couch',
                    description: 'æ—¥å¸¸å®¶åº­ä¼‘æ¯å¨±ä¹',
                    detail: 'ä½œä¸ºæ—¥å¸¸èµ·å±…å’Œæ‹›å¾…å®¢äººçš„æ ¸å¿ƒç©ºé—´ï¼Œå®¢å…æ²™å‘éœ€è¦å…¼é¡¾èˆ’é€‚æ€§ä¸ç¾è§‚æ€§ã€‚æ¨èé€‰æ‹©è€ç”¨é¢æ–™ï¼Œé€‚ä¸­è½¯ç¡¬åº¦å’Œåˆé€‚çš„å°ºå¯¸ï¼Œæ—¢èƒ½æ»¡è¶³æ—¥å¸¸ä¼‘æ¯éœ€æ±‚ï¼Œåˆèƒ½é€‚åº”å„ç§ç¤¾äº¤åœºåˆã€‚'
                },
                'kids-room': {
                    name: 'å„¿ç«¥æˆ¿å®¶å…·',
                    icon: 'fa-child',
                    description: 'é€‚åˆå„¿ç«¥æ´»åŠ¨åŒºåŸŸ',
                    detail: 'æ”¾ç½®åœ¨å„¿ç«¥æ´»åŠ¨åŒºåŸŸçš„æ²™å‘éœ€è¦ç‰¹åˆ«æ³¨é‡å®‰å…¨å’Œæ˜“æ¸…æ´ç‰¹æ€§ã€‚æ¨èé€‰æ‹©å¯æ‹†æ´—é¢æ–™ï¼Œæ— å°–é”è¾¹è§’è®¾è®¡ï¼Œä¸”å…·æœ‰ä¸€å®šè€ç£¨æ€§èƒ½ï¼Œä»¥åº”å¯¹å­©å­ä»¬çš„å„ç§æ´»åŠ¨å’Œå¯èƒ½çš„æ±¡æ¸ã€‚'
                },
                'pet-friendly': {
                    name: 'å® ç‰©å‹å¥½å‹',
                    icon: 'fa-paw',
                    description: 'è€ç£¨é˜²æŠ“è€è„é¢æ–™',
                    detail: 'æœ‰å® ç‰©çš„å®¶åº­éœ€è¦ç‰¹åˆ«è€ç”¨çš„æ²™å‘ã€‚æ¨èé€‰æ‹©é˜²åˆ®è€ç£¨ã€æ˜“æ¸…æ´çš„é¢æ–™ï¼Œå¦‚å¾®çº¤çš®é©æˆ–ç‰¹æ®Šå¤„ç†çš„å¸ƒè‰ºé¢æ–™ï¼ŒåŒæ—¶é¿å…ä½¿ç”¨å®¹æ˜“å‹¾çº¿æˆ–ç§¯ç´¯å® ç‰©æ¯›å‘çš„æè´¨ã€‚'
                },
                'office-lounge': {
                    name: 'åŠå…¬ä¼‘æ¯åŒº',
                    icon: 'fa-coffee',
                    description: 'å•†åŠ¡ä¼‘é—²æ¥å¾…åŒºåŸŸ',
                    detail: 'åŠå…¬ç¯å¢ƒä¸­çš„ä¼‘æ¯åŒºæ²™å‘éœ€è¦å…¼é¡¾ä¸“ä¸šå½¢è±¡å’Œèˆ’é€‚åº¦ã€‚æ¨èé€‰æ‹©å•†åŠ¡é£æ ¼è®¾è®¡ï¼Œæ˜“æ¸…æ´ä¸”è€ç”¨çš„é¢æ–™ï¼Œé€‚ä¸­çš„è½¯ç¡¬åº¦å¯ä»¥åœ¨çŸ­æš‚ä¼‘æ¯ä¸­æä¾›è¶³å¤Ÿçš„æ”¯æ’‘å’Œæ”¾æ¾æ•ˆæœã€‚'
                },
                'guest-house': {
                    name: 'æ°‘å®¿å®¢æˆ¿',
                    icon: 'fa-bed',
                    description: 'å…¼å…·èˆ’é€‚ä¸å®ç”¨æ€§',
                    detail: 'æ°‘å®¿ç¯å¢ƒéœ€è¦é«˜æ•ˆå®ç”¨ä¸”æœ‰ç‰¹è‰²çš„æ²™å‘ã€‚æ¨èé€‰æ‹©å¤šåŠŸèƒ½è®¾è®¡ï¼ˆå¦‚æ²™å‘åºŠï¼‰ï¼Œæ˜“æ¸…æ´é¢æ–™ï¼Œé£æ ¼ä¸Šå¯æ ¹æ®æ°‘å®¿æ•´ä½“å®šä½é€‰æ‹©ä¹¡æ‘ã€ç°ä»£æˆ–åŒ—æ¬§ç­‰ä¸åŒé£æ ¼ã€‚'
                },
                'small-apartment': {
                    name: 'å°æˆ·å‹å…¬å¯“',
                    icon: 'fa-home',
                    description: 'ç´§å‡‘ç©ºé—´æœ€ä¼˜åŒ–åˆ©ç”¨',
                    detail: 'å°é¢ç§¯å±…ä½ç©ºé—´éœ€è¦å·§å¦™åˆ©ç”¨æ¯ä¸€å¯¸åŒºåŸŸã€‚æ¨èé€‰æ‹©ä½“ç§¯é€‚ä¸­ã€å‚¨ç‰©åŠŸèƒ½ä¸°å¯Œçš„ç´§å‡‘å‹æ²™å‘ï¼Œå¯è€ƒè™‘è½¬è§’è®¾è®¡æˆ–æ¨¡å—åŒ–ç»„åˆï¼Œæœ€å¤§åŒ–åˆ©ç”¨æœ‰é™ç©ºé—´ã€‚'
                },
                'elderly-friendly': {
                    name: 'è€äººå‹å¥½å‹',
                    icon: 'fa-wheelchair',
                    description: 'æ˜“èµ·èº«é«˜åº¦ä¸æ”¯æ’‘',
                    detail: 'é€‚åˆè€å¹´äººä½¿ç”¨çš„æ²™å‘éœ€ç‰¹åˆ«æ³¨é‡æ˜“èµ·èº«è®¾è®¡ã€‚æ¨èé€‰æ‹©åº§é«˜ç•¥é«˜ã€åæ„Ÿåç¡¬çš„æ²™å‘ï¼Œå¸¦æ‰¶æ‰‹è®¾è®¡æœ‰åŠ©äºèµ·èº«æ”¯æ’‘ï¼Œé¢æ–™åº”é¿å…å…‰æ»‘æè´¨ï¼Œé˜²æ­¢æ»‘å€’é£é™©ã€‚'
                },
                'entertainment': {
                    name: 'å½±éŸ³å¨±ä¹åŒº',
                    icon: 'fa-film',
                    description: 'èˆ’é€‚è§‚å½±ä½“éªŒä¿éšœ',
                    detail: 'ä¸“ä¸ºè§‚å½±å’Œæ¸¸æˆè®¾è®¡çš„æ²™å‘éœ€è¦æä¾›é•¿æ—¶é—´çš„èˆ’é€‚ä½“éªŒã€‚æ¨èé€‰æ‹©å¸¦æœ‰å¯è°ƒèŠ‚é èƒŒã€è„šæ‰˜çš„åŠŸèƒ½æ²™å‘ï¼Œæˆ–å‰§é™¢å¼æ’åˆ—çš„ç»„åˆæ²™å‘ï¼Œæä¾›æ²‰æµ¸å¼çš„å¨±ä¹ä½“éªŒã€‚'
                },
                'eco-friendly': {
                    name: 'è‡ªç„¶ç¯ä¿',
                    icon: 'fa-leaf',
                    description: 'ç®€çº¦è‡ªç„¶è£…ä¿®é£æ ¼',
                    detail: 'è¿½æ±‚è‡ªç„¶ç¯ä¿ç†å¿µçš„å±…ä½ç©ºé—´éœ€é€‰æ‹©ä¸ä¹‹ç›¸åŒ¹é…çš„æ²™å‘ã€‚æ¨èä½¿ç”¨å¯æŒç»­ææ–™å¦‚æœ‰æœºæ£‰ã€äºšéº»ã€ç«¹çº¤ç»´æˆ–å›æ”¶ææ–™åˆ¶æˆçš„æ²™å‘ï¼Œè‰²è°ƒä»¥ç±³è‰²ã€ç°è‰²ã€ç»¿è‰²ç­‰è‡ªç„¶è‰²ä¸ºä¸»ï¼Œç®€çº¦çº¿æ¡è®¾è®¡ä¸è‡ªç„¶è£…ä¿®é£æ ¼ç›¸å¾—ç›Šå½°ã€‚'
                },
                'multi-function': {
                    name: 'å¤šåŠŸèƒ½å®¢æˆ¿',
                    icon: 'fa-exchange-alt',
                    description: 'éšè—æ‹‰åºŠä¸¤ç”¨è®¾è®¡',
                    detail: 'é€‚åˆéœ€è¦çµæ´»åˆ©ç”¨ç©ºé—´çš„å®¶åº­ï¼Œæ²™å‘å¯ä»¥åœ¨æ—¥å¸¸ä½œä¸ºæ™®é€šåº§æ¤…ä½¿ç”¨ï¼Œéœ€è¦æ—¶å¯æ‹‰å‡ºéšè—åºŠé“ºæ¥å¾…å®¢äººè¿‡å¤œã€‚æ¨èé€‰æ‹©ç»“æ„ç¨³å›ºã€æ‹‰ä¼¸æœºæ„æµç•…çš„æ‹‰åºŠè®¾è®¡ï¼Œå¹¶é…å¤‡èˆ’é€‚çš„åºŠå«ï¼Œç¡®ä¿å®¢äººæœ‰è‰¯å¥½çš„ç¡çœ ä½“éªŒã€‚'
                }
            };
            
            // ç‚¹å‡»åœºæ™¯æ ‡ç­¾çš„å¤„ç†
            sceneTags.forEach(tag => {
                tag.addEventListener('click', function(e) {
                    // å¦‚æœç‚¹å‡»çš„æ˜¯ä¸‹è½½æŒ‰é’®ï¼Œä¸è§¦å‘é€‰ä¸­
                    if (e.target.closest('.download-btn')) {
                        return;
                    }
                    
                    const sceneType = this.getAttribute('data-scene');
                    
                    // åˆ‡æ¢å½“å‰æ ‡ç­¾çš„é€‰ä¸­çŠ¶æ€
                    this.classList.toggle('active');
                    
                    // éšè—æ‰€æœ‰è¯¦æƒ…
                    sceneDetails.forEach(detail => {
                        detail.classList.remove('active');
                    });
                    
                    // å¦‚æœå½“å‰æ ‡ç­¾è¢«é€‰ä¸­ï¼Œæ˜¾ç¤ºå¯¹åº”è¯¦æƒ…
                    if (this.classList.contains('active')) {
                        const targetDetail = document.querySelector(`.scene-detail[data-detail="${sceneType}"]`);
                        if (targetDetail) {
                            targetDetail.classList.add('active');
                        }
                    } else {
                        // æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–é€‰ä¸­çš„æ ‡ç­¾
                        const activeTag = document.querySelector('.scene-tag.active');
                        if (activeTag) {
                            const activeScene = activeTag.getAttribute('data-scene');
                            const activeDetail = document.querySelector(`.scene-detail[data-detail="${activeScene}"]`);
                            if (activeDetail) {
                                activeDetail.classList.add('active');
                            }
                        } else {
                            // å¦‚æœæ²¡æœ‰é€‰ä¸­çš„æ ‡ç­¾ï¼Œæ˜¾ç¤ºé»˜è®¤æç¤º
                            defaultDetail.classList.add('active');
                        }
                    }
                });
            });
            
            // ç¡®è®¤æŒ‰é’®å¤„ç†
            const confirmBtn = document.querySelector('.confirm-btn');
            confirmBtn.addEventListener('click', function() {
                const selectedScenes = [];
                document.querySelectorAll('.scene-tag.active').forEach(tag => {
                    selectedScenes.push(tag.getAttribute('data-scene'));
                });
                
                if (selectedScenes.length === 0) {
                    alert('è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ªé€‚ç”¨åœºæ™¯');
                    return;
                }
                
                // ä¿å­˜é€‰æ‹©çš„åœºæ™¯åˆ°æœ¬åœ°å­˜å‚¨
                localStorage.setItem('selectedSofaScenes', JSON.stringify(selectedScenes.map(scene => sceneData[scene].name)));
                
                // æ˜¾ç¤ºé€‰æ‹©çš„åœºæ™¯
                alert('æ‚¨å·²é€‰æ‹©ä»¥ä¸‹åœºæ™¯ï¼š' + selectedScenes.map(scene => sceneData[scene].name).join('ã€'));
                
                // è·³è½¬åˆ°æ²™å‘å®šåˆ¶é¡µé¢
                window.location.href = 'sofa-custom.html';
            });
            
            // è®¾ç½®å…¨å±€å˜é‡
            window.sceneData = sceneData;
        });
        
        // è·å–åœºæ™¯å¯¹åº”çš„Unicodeç¬¦å·
        function getUnicodeSymbol(icon) {
            // å°†Font Awesomeå›¾æ ‡æ˜ å°„åˆ°Unicodeç¬¦å·
            const iconMap = {
                'fa-couch': 'ğŸ›‹ï¸',
                'fa-child': 'ğŸ‘¶',
                'fa-paw': 'ğŸ¾',
                'fa-coffee': 'â˜•',
                'fa-bed': 'ğŸ›ï¸',
                'fa-home': 'ğŸ ',
                'fa-wheelchair': 'â™¿',
                'fa-film': 'ğŸ¬',
                'fa-info-circle': 'â„¹ï¸',
                'fa-tags': 'ğŸ·ï¸',
                'fa-arrow-left': 'â†',
                'fa-check': 'âœ“',
                'fa-download': 'â¬‡ï¸',
                'fa-copy': 'ğŸ“‹',
                'fa-leaf': 'ğŸƒ',
                'fa-exchange-alt': 'ğŸ”„'
            };
            
            return iconMap[icon] || 'â—'; // é»˜è®¤åœ†ç‚¹ç¬¦å·
        }
        
        // æ˜¾ç¤ºä¸‹è½½æ¨¡æ€æ¡†
        function showDownloadModal(sceneId) {
            const modal = document.getElementById('downloadModal');
            const sceneData = window.sceneData[sceneId];
            
            if (!sceneData) return;
            
            // æ›´æ–°æ¨¡æ€æ¡†å†…å®¹
            document.getElementById('sceneName').textContent = sceneData.name;
            document.getElementById('sceneDescription').textContent = sceneData.description;
            
            // ç”ŸæˆåŒ…å«å†…è”CSSçš„HTMLä»£ç 
            const inlineHtmlCode = `<!-- ${sceneData.name} åœºæ™¯ç»„ä»¶ -->
<div class="scene-tag">
    <i class="fas ${sceneData.icon}"></i>
    <span>${sceneData.name}</span>
    <div class="scene-description">${sceneData.description}</div>
</div>

<div class="scene-detail">
    <div class="scene-detail-title"><i class="fas ${sceneData.icon}"></i>${sceneData.name}</div>
    <div class="scene-detail-content">
        ${sceneData.detail}
    </div>
</div>

<style>
/* ${sceneData.name} åœºæ™¯æ ·å¼ */
.scene-tag {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    background-color: #fff;
    border-radius: 10px;
    border: 1px solid #e0e0e0;
    padding: 15px 10px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
    cursor: pointer;
    text-align: center;
}

.scene-tag:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    border-color: #4aad92;
}

.scene-tag.active {
    background-color: rgba(74, 173, 146, 0.05);
    border-color: #4aad92;
    box-shadow: 0 2px 10px rgba(74, 173, 146, 0.15);
}

.scene-tag i {
    font-size: 28px;
    color: #4aad92;
    margin-bottom: 10px;
    background-color: rgba(74, 173, 146, 0.1);
    padding: 12px;
    border-radius: 50%;
    width: 55px;
    height: 55px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.scene-tag span {
    font-weight: 500;
    color: #36454f;
}

.scene-description {
    margin-top: 6px;
    font-size: 12px;
    color: #666;
    line-height: 1.3;
}

.scene-detail {
    margin-top: 15px;
}

.scene-detail-title {
    font-weight: 600;
    margin-bottom: 8px;
    color: #4aad92;
    display: flex;
    align-items: center;
}

.scene-detail-title i {
    margin-right: 8px;
}

.scene-detail-content {
    line-height: 1.6;
    color: #555;
}
</style>`;

            // ç”Ÿæˆå¯Œæ–‡æœ¬å‹å¥½ç‰ˆæœ¬ (ä½¿ç”¨Unicodeç¬¦å·ä»£æ›¿Font Awesome)
            const unicodeSymbol = getUnicodeSymbol(sceneData.icon);
            const richTextCode = `<!-- ${sceneData.name} åœºæ™¯ç»„ä»¶ - å¯Œæ–‡æœ¬ç‰ˆ -->
<!-- å¦‚éœ€å°†å¤šä¸ªåœºæ™¯å¹¶æ’æ˜¾ç¤ºï¼Œè¯·å¤åˆ¶å¤šä¸ªåœºæ™¯ä»£ç æ”¾åœ¨åŒä¸€ä¸ªå®¹å™¨å†… -->
<div style="display: inline-block; vertical-align: top; box-sizing: border-box; background-color: #fff; border-radius: 8px; border: 1px solid #e0e0e0; padding: 10px 5px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05); text-align: center; width: 32%; margin: 0.5%;">
    <div style="font-size: 22px; color: #4aad92; margin-bottom: 5px; background-color: rgba(74, 173, 146, 0.1); padding: 5px; border-radius: 50%; width: 36px; height: 36px; margin: 0 auto; text-align: center; line-height: 1.3;">
        ${unicodeSymbol}
    </div>
    <div style="font-weight: 500; color: #36454f; font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">${sceneData.name}</div>
    <div style="margin-top: 3px; font-size: 9px; color: #666; line-height: 1.2; height: 22px; overflow: hidden;">${sceneData.description}</div>
</div>
`;

            // ç”Ÿæˆä¸‰æ å®¹å™¨æ¨¡æ¿
            const threeColumnContainerCode = `<!-- ä¸‰æ å¸ƒå±€å®¹å™¨ - å°†åœºæ™¯ä»£ç ç²˜è´´åœ¨è¿™é‡Œ -->
<div style="display: flex; flex-wrap: wrap; justify-content: flex-start; width: 100%; margin: 0 auto; box-sizing: border-box; padding: 0;">
    <!-- åœ¨æ­¤å¤„ç²˜è´´å¤šä¸ªåœºæ™¯ä»£ç ï¼Œæ¯ä¸‰ä¸ªä¸ºä¸€è¡Œ -->
    
</div>`;

            // å°†ä»£ç æ·»åŠ åˆ°HTMLå…ƒç´ ä¸­
            document.getElementById('htmlCode').textContent = inlineHtmlCode;
            document.getElementById('richTextCode').textContent = richTextCode;
            
            // æ·»åŠ ä¸€ä¸ªä¸‰æ å®¹å™¨çš„ä»£ç æŒ‰é’®
            if (!document.getElementById('threeColumnContainerBtn')) {
                const btnContainer = document.querySelector('button[onclick="copyToClipboard(\'richTextCode\')"]').parentElement;
                
                const threeColumnBtn = document.createElement('button');
                threeColumnBtn.id = 'threeColumnContainerBtn';
                threeColumnBtn.className = 'copy-btn';
                threeColumnBtn.style.backgroundColor = '#6366f1';
                threeColumnBtn.innerHTML = '<i class="fas fa-copy mr-1"></i> å¤åˆ¶ä¸‰æ å®¹å™¨';
                threeColumnBtn.onclick = function() {
                    navigator.clipboard.writeText(threeColumnContainerCode).then(() => {
                        threeColumnBtn.innerHTML = '<i class="fas fa-check mr-1"></i> å·²å¤åˆ¶';
                        threeColumnBtn.style.backgroundColor = '#38a169';
                        
                        setTimeout(() => {
                            threeColumnBtn.innerHTML = '<i class="fas fa-copy mr-1"></i> å¤åˆ¶ä¸‰æ å®¹å™¨';
                            threeColumnBtn.style.backgroundColor = '#6366f1';
                        }, 2000);
                    }).catch(err => {
                        console.error('å¤åˆ¶å¤±è´¥:', err);
                        alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                    });
                };
                
                if (document.getElementById('responsiveContainerBtn')) {
                    document.getElementById('responsiveContainerBtn').remove();
                }
                
                btnContainer.appendChild(threeColumnBtn);
                
                // æ›´æ–°è¯´æ˜æ–‡å­—
                const infoText = document.querySelector('.text-xs.text-gray-500.mt-1');
                if (infoText) {
                    infoText.textContent = 'å…ˆå¤åˆ¶ä¸‰æ å®¹å™¨ä»£ç ï¼Œå†å¤åˆ¶åœºæ™¯ä»£ç ï¼Œæ”¾å…¥ä¸‰æ å®¹å™¨ä¸­';
                } else {
                    const newInfoText = document.createElement('p');
                    newInfoText.className = 'text-xs text-gray-500 mt-1';
                    newInfoText.textContent = 'å…ˆå¤åˆ¶ä¸‰æ å®¹å™¨ä»£ç ï¼Œå†å¤åˆ¶åœºæ™¯ä»£ç ï¼Œæ”¾å…¥ä¸‰æ å®¹å™¨ä¸­';
                    btnContainer.after(newInfoText);
                }
            }
            
            // å­˜å‚¨å½“å‰åœºæ™¯æ•°æ®ä¾›ä¸‹è½½ä½¿ç”¨
            window.currentSceneData = sceneData;
            
            // æ˜¾ç¤ºæ¨¡æ€æ¡†
            modal.style.display = 'flex';
        }
        
        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('downloadModal').style.display = 'none';
        }
        
        // å¤åˆ¶ä»£ç åˆ°å‰ªè´´æ¿
        function copyToClipboard(elementId) {
            const codeElement = document.getElementById(elementId);
            const text = codeElement.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                // åˆ›å»ºä¸´æ—¶æç¤ºå…ƒç´ 
                const copyBtn = document.querySelector(`button[onclick="copyToClipboard('${elementId}')"]`);
                const originalText = copyBtn.innerHTML;
                
                copyBtn.innerHTML = '<i class="fas fa-check mr-1"></i> å·²å¤åˆ¶';
                copyBtn.style.backgroundColor = '#38a169';
                
                // 2ç§’åæ¢å¤åŸæ ·
                setTimeout(() => {
                    copyBtn.innerHTML = originalText;
                    copyBtn.style.backgroundColor = '';
                }, 2000);
            }).catch(err => {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
            });
        }
        
        // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­æ¨¡æ€æ¡†
        document.getElementById('downloadModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
        
        // ä¸‹è½½HTMLæ–‡ä»¶
        function downloadHtmlFile() {
            if (!window.currentSceneData) return;
            
            const sceneData = window.currentSceneData;
            
            // åˆ›å»ºå®Œæ•´çš„HTMLæ–‡æ¡£
            const fullHtmlContent = `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${sceneData.name} - æ²™å‘é€‚ç”¨åœºæ™¯</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body style="font-family: 'Helvetica Neue', Arial, sans-serif; padding: 20px; background-color: #f5f7fa;">
    <h1 style="text-align: center; color: #36454f; margin-bottom: 20px;">${sceneData.name} - æ²™å‘é€‚ç”¨åœºæ™¯</h1>
    
    <div style="max-width: 800px; margin: 0 auto; background: #fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1); padding: 20px;">
        <!-- ${sceneData.name} åœºæ™¯ç»„ä»¶ -->
        <div class="scene-tag">
            <i class="fas ${sceneData.icon}"></i>
            <span>${sceneData.name}</span>
            <div class="scene-description">${sceneData.description}</div>
        </div>
        
        <div class="scene-detail" style="margin-top: 30px;">
            <div class="scene-detail-title"><i class="fas ${sceneData.icon}"></i>${sceneData.name}</div>
            <div class="scene-detail-content">
                ${sceneData.detail}
            </div>
        </div>
        
        <style>
        /* ${sceneData.name} åœºæ™¯æ ·å¼ */
        .scene-tag {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: #fff;
            border-radius: 10px;
            border: 1px solid #e0e0e0;
            padding: 15px 10px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            max-width: 200px;
            margin: 0 auto;
        }
        
        .scene-tag:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            border-color: #4aad92;
        }
        
        .scene-tag i {
            font-size: 28px;
            color: #4aad92;
            margin-bottom: 10px;
            background-color: rgba(74, 173, 146, 0.1);
            padding: 12px;
            border-radius: 50%;
            width: 55px;
            height: 55px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .scene-tag span {
            font-weight: 500;
            color: #36454f;
        }
        
        .scene-description {
            margin-top: 6px;
            font-size: 12px;
            color: #666;
            line-height: 1.3;
        }
        
        .scene-detail {
            margin-top: 15px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border: 1px dashed #e0e0e0;
        }
        
        .scene-detail-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #4aad92;
            display: flex;
            align-items: center;
        }
        
        .scene-detail-title i {
            margin-right: 8px;
        }
        
        .scene-detail-content {
            line-height: 1.6;
            color: #555;
        }
        </style>
    </div>
    
    <footer style="text-align: center; margin-top: 30px; color: #666; font-size: 12px;">
        &copy; å®¶é€¸ç”Ÿæ´» - æ²™å‘é€‚ç”¨åœºæ™¯ç»„ä»¶
    </footer>
</body>
</html>`;
            
            // åˆ›å»ºBlobå¯¹è±¡
            const blob = new Blob([fullHtmlContent], { type: 'text/html' });
            
            // åˆ›å»ºä¸‹è½½é“¾æ¥
            const downloadLink = document.createElement('a');
            downloadLink.href = URL.createObjectURL(blob);
            downloadLink.download = `${sceneData.name}-æ²™å‘åœºæ™¯.html`;
            
            // æ·»åŠ åˆ°DOMå¹¶è§¦å‘ç‚¹å‡»äº‹ä»¶
            document.body.appendChild(downloadLink);
            downloadLink.click();
            
            // æ¸…ç†
            document.body.removeChild(downloadLink);
            setTimeout(() => URL.revokeObjectURL(downloadLink.href), 100);
            
            // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
            const downloadBtn = document.querySelector('button[onclick="downloadHtmlFile()"]');
            const originalText = downloadBtn.innerHTML;
            
            downloadBtn.innerHTML = '<i class="fas fa-check mr-1"></i> ä¸‹è½½æˆåŠŸ';
            downloadBtn.style.backgroundColor = '#38a169';
            
            // 2ç§’åæ¢å¤åŸæ ·
            setTimeout(() => {
                downloadBtn.innerHTML = originalText;
                downloadBtn.style.backgroundColor = '#4361ee';
            }, 2000);
        }
        
        // ä¸‹è½½æ²™å‘SVGå›¾æ ‡
        const sofaTypeData = {
            'single': {
                name: 'å•äººä½æ²™å‘',
                description: 'é€‚åˆå°æˆ·å‹/ä¹¦æˆ¿'
            },
            'double': {
                name: 'åŒäººä½æ²™å‘',
                description: 'é€‚åˆ15-20ã¡å®¢å…'
            },
            'triple': {
                name: 'ä¸‰äººä½æ²™å‘',
                description: 'é€‚åˆ20-25ã¡å®¢å…'
            },
            'quad': {
                name: 'å››äººä½æ²™å‘',
                description: 'é€‚åˆ25ã¡ä»¥ä¸Šå®¢å…'
            },
            'triple-left': {
                name: '3+å·¦å¦ƒä½æ²™å‘',
                description: 'é€‚åˆLå‹ç©ºé—´'
            },
            'triple-right': {
                name: '3+å³å¦ƒä½æ²™å‘',
                description: 'é€‚åˆLå‹ç©ºé—´'
            },
            'single-pullout': {
                name: 'å•äººä½æ‹‰åºŠ',
                description: 'é€‚åˆå°å‹å®¢æˆ¿/ä¹¦æˆ¿'
            },
            'double-pullout': {
                name: 'åŒäººä½æ‹‰åºŠ',
                description: 'é€‚åˆä¸­å‹å®¢æˆ¿/ä¹¦æˆ¿'
            },
            'triple-pullout': {
                name: 'ä¸‰äººä½æ‹‰åºŠ',
                description: 'é€‚åˆå¤§å‹å®¢å…/ä¼šå®¢å…'
            }
        };
        
        // æ˜¾ç¤ºæ²™å‘SVGä¸‹è½½æ¨¡æ€æ¡†
        async function downloadSofaSvg(sofaType) {
            const modal = document.getElementById('svgDownloadModal');
            const sofaData = sofaTypeData[sofaType];
            
            if (!sofaData) return;
            
            // æ›´æ–°æ¨¡æ€æ¡†å†…å®¹
            document.getElementById('sofaTypeName').textContent = sofaData.name;
            document.getElementById('sofaTypeDescription').textContent = sofaData.description;
            
            // è®¾ç½®é¢„è§ˆå›¾
            const previewImg = document.getElementById('previewSofaSvg');
            previewImg.src = `../img/sofa-types/${sofaType}.svg`;
            
            try {
                // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
                const svgCodeBlock = document.getElementById('svgCode');
                svgCodeBlock.textContent = 'æ­£åœ¨åŠ è½½SVGå†…å®¹...';
                
                // è·å–SVGæ–‡ä»¶å†…å®¹ - æ·»åŠ ç¼“å­˜ç ´åå‚æ•°é˜²æ­¢ç¼“å­˜é—®é¢˜
                const response = await fetch(`../img/sofa-types/${sofaType}.svg?v=${new Date().getTime()}`);
                
                if (!response.ok) {
                    throw new Error(`HTTPé”™è¯¯: ${response.status}`);
                }
                
                const svgText = await response.text();
                
                // æ£€æŸ¥SVGå†…å®¹æ˜¯å¦åˆæ³•
                if (!svgText || svgText.trim().length === 0 || !svgText.includes('<svg')) {
                    throw new Error('è·å–åˆ°çš„SVGå†…å®¹æ— æ•ˆ');
                }
                
                // æ˜¾ç¤ºSVGä»£ç 
                svgCodeBlock.textContent = svgText;
                
                // å­˜å‚¨å½“å‰æ²™å‘ç±»å‹æ•°æ®ä¾›ä¸‹è½½ä½¿ç”¨
                window.currentSofaType = sofaType;
                window.currentSvgText = svgText;
                
                // å¯ç”¨ä¸‹è½½æŒ‰é’®
                const downloadBtn = document.querySelector('button[onclick="downloadSofaSvgFile()"]');
                downloadBtn.disabled = false;
                downloadBtn.style.opacity = '1';
                
                // æ˜¾ç¤ºæ¨¡æ€æ¡†
                modal.style.display = 'flex';
            } catch (error) {
                console.error('è·å–SVGæ–‡ä»¶å¤±è´¥:', error);
                
                // åœ¨æ¨¡æ€æ¡†ä¸­æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                document.getElementById('svgCode').textContent = `è·å–SVGæ–‡ä»¶å¤±è´¥: ${error.message}\nè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åå†è¯•ã€‚`;
                
                // ç¦ç”¨ä¸‹è½½æŒ‰é’®
                const downloadBtn = document.querySelector('button[onclick="downloadSofaSvgFile()"]');
                downloadBtn.disabled = true;
                downloadBtn.style.opacity = '0.5';
                
                // ä»ç„¶æ˜¾ç¤ºæ¨¡æ€æ¡†ä»¥ä¾¿ç”¨æˆ·çœ‹åˆ°é”™è¯¯ä¿¡æ¯
                modal.style.display = 'flex';
            }
        }
        
        // å…³é—­æ²™å‘SVGæ¨¡æ€æ¡†
        function closeSvgModal() {
            document.getElementById('svgDownloadModal').style.display = 'none';
        }
        
        // ä¸‹è½½æ²™å‘SVGæ–‡ä»¶
        function downloadSofaSvgFile() {
            if (!window.currentSofaType || !window.currentSvgText) {
                alert('SVGå†…å®¹ä¸å¯ç”¨ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                return;
            }
            
            const sofaType = window.currentSofaType;
            const svgText = window.currentSvgText;
            const sofaData = sofaTypeData[sofaType];
            
            try {
                // åˆ›å»ºBlobå¯¹è±¡
                const blob = new Blob([svgText], { type: 'image/svg+xml' });
                
                // åˆ›å»ºä¸‹è½½é“¾æ¥
                const downloadLink = document.createElement('a');
                
                // ä½¿ç”¨æ›´å¯é çš„æ–¹å¼åˆ›å»ºURL
                const url = window.URL || window.webkitURL || window;
                downloadLink.href = url.createObjectURL(blob);
                downloadLink.download = `${sofaData.name}.svg`;
                
                // è®¾ç½®æ›´å¤šå±æ€§å¢åŠ å…¼å®¹æ€§
                downloadLink.type = 'image/svg+xml';
                downloadLink.target = '_blank';
                downloadLink.rel = 'noopener noreferrer';
                downloadLink.style.display = 'none';
                
                // æ·»åŠ åˆ°DOMå¹¶è§¦å‘ç‚¹å‡»äº‹ä»¶
                document.body.appendChild(downloadLink);
                
                // è®¾ç½®è¶…æ—¶ï¼Œç¡®ä¿ä¸‹è½½è§¦å‘
                setTimeout(() => {
                    downloadLink.click();
                    
                    // å»¶è¿Ÿç§»é™¤ï¼Œç¡®ä¿ä¸‹è½½æœ‰è¶³å¤Ÿæ—¶é—´å¼€å§‹
                    setTimeout(() => {
                        document.body.removeChild(downloadLink);
                        
                        // å»¶è¿Ÿé‡Šæ”¾URLå¯¹è±¡
                        setTimeout(() => {
                            url.revokeObjectURL(downloadLink.href);
                        }, 1000);
                    }, 1000);
                }, 100);
                
                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                const downloadBtn = document.querySelector('button[onclick="downloadSofaSvgFile()"]');
                const originalText = downloadBtn.innerHTML;
                
                downloadBtn.innerHTML = '<i class="fas fa-check mr-1"></i> ä¸‹è½½ä¸­...';
                downloadBtn.style.backgroundColor = '#38a169';
                
                // 2ç§’åæ¢å¤åŸæ ·
                setTimeout(() => {
                    downloadBtn.innerHTML = originalText;
                    downloadBtn.style.backgroundColor = '#4361ee';
                }, 2000);
            } catch (error) {
                console.error('ä¸‹è½½SVGæ–‡ä»¶å¤±è´¥:', error);
                alert(`ä¸‹è½½å¤±è´¥: ${error.message}\nè¯·å°è¯•å³é”®ç‚¹å‡»é¢„è§ˆå›¾å¹¶é€‰æ‹©"å›¾ç‰‡å¦å­˜ä¸º..."`);
                
                // æä¾›å¤‡ç”¨æ–¹æ¡ˆ - ç›´æ¥æ‰“å¼€SVGåœ¨æ–°çª—å£
                window.open(`../img/sofa-types/${sofaType}.svg`, '_blank');
            }
        }
        
        // ç‚¹å‡»æ²™å‘SVGæ¨¡æ€æ¡†èƒŒæ™¯å…³é—­æ¨¡æ€æ¡†
        document.getElementById('svgDownloadModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSvgModal();
            }
        });
        
        // ä¸ºæ²™å‘é¢„è§ˆæ ‡ç­¾æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.sofa-preview-tag').forEach(tag => {
            tag.addEventListener('click', function(e) {
                // å¦‚æœç‚¹å‡»çš„æ˜¯ä¸‹è½½æŒ‰é’®ï¼Œä¸è§¦å‘é¢„è§ˆ
                if (e.target.closest('.download-btn')) {
                    return;
                }
                
                const sofaType = this.getAttribute('data-sofa-type');
                downloadSofaSvg(sofaType);
            });
        });
    </script>
</body>
</html> 
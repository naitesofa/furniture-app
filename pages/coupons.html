<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>优惠券 - 家逸生活</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="../css/common.css" rel="stylesheet">
    <link href="../css/scrollbar.css" rel="stylesheet">
    <!-- 新添加的CSS文件 -->
    <link href="../css/coupon.css" rel="stylesheet">
    <link href="../css/animations.css" rel="stylesheet">
    <!-- 添加媒体查询支持 -->
    <link rel="stylesheet" href="../css/coupon.css" media="screen and (max-width: 768px)">
    <link rel="stylesheet" href="../css/coupon.css" media="screen and (min-width: 769px)">
    <!-- 添加高DPI屏幕支持 -->
    <link rel="stylesheet" href="../css/coupon.css" media="(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)">
</head>
<body>
    <!-- 顶部导航栏 -->
    <div class="nav-bar h-12">
        <div class="flex items-center justify-between px-4 h-full">
            <div class="flex items-center">
                <a href="javascript:history.back()" class="text-gray-500 mr-3">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <div class="text-lg font-medium">我的优惠券</div>
            </div>
            <div class="flex items-center">
                <!-- <a href="customer-service.html" class="text-gray-500 ml-3">
                    <i class="fas fa-question-circle"></i>
                </a> -->
                <!-- 添加测试按钮 -->
                <button id="toggleEmptyBtn" class="ml-3 px-2 py-1 text-xs rounded bg-green-600 text-white">
                    测试空状态
                </button>
            </div>
        </div>
    </div>
    
    <!-- 标签页 -->
    <div class="tabs-container">
        <div class="tab active" data-tab="available">可使用</div>
        <div class="tab" data-tab="used">已使用/已过期</div>
    </div>
    
    <!-- 主要内容区 -->
    <div class="main-content">
        <!-- 优惠券码输入 -->
        <!-- <div class="coupon-input-container">
            <div class="coupon-input-title">添加优惠券</div>
            <div class="coupon-input-box">
                <input type="text" class="coupon-input" placeholder="请输入优惠券码" id="couponCode">
                <button class="coupon-submit btn-click-effect">领取</button>
            </div>
        </div> -->
        
        <!-- 可使用优惠券列表 -->
        <div class="coupons-container" id="availableCoupons" style="margin-top: 14px;">
            <div class="coupon-list">
                <!-- 满减券 -->
                <div class="coupon-card" style="border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; border-left: 4px solid #26a69a;">
                    <div class="coupon-content" style="padding: 15px;">
                        <div class="coupon-left">
                            <div class="coupon-amount" style="color: #26a69a; font-size: 24px; font-weight: bold;">¥300</div>
                            <div class="coupon-condition" style="font-size: 14px; color: #666; margin-top: 5px;">满4500元使用</div>
                            <div class="coupon-validity coupon-expiry-soon pulse-animation" style="font-size: 13px; color: #ff6b6b; margin-top: 6px;">还剩3天到期</div>
                            <div class="coupon-validity" style="font-size: 13px; color: #888; margin-top: 6px;">有效期至：2023-12-31</div>
                        </div>
                        <div class="coupon-right">
                            <button class="coupon-use-btn btn-click-effect" style="background-color: #26a69a; border: none; border-radius: 20px; padding: 8px 15px; color: white; font-size: 14px;">立即使用</button>
                        </div>
                    </div>
                    <div class="coupon-footer" style="background-color: #f7f7f7; padding: 10px 15px; border-top: 1px dashed #e0e0e0; border-radius: 0 0 12px 12px;">
                        <div class="coupon-details" onclick="toggleDetails(this)">
                            使用规则 <i class="fas fa-chevron-down rotate-transition"></i>
                        </div>
                        <div class="coupon-details-content transition-height">
                            <div class="coupon-detail-item">- 仅限家具类商品使用</div>
                            <div class="coupon-detail-item">- 不可与其他优惠同时使用</div>
                            <div class="coupon-detail-item">- 每单限用一张</div>
                        </div>
                    </div>
                </div>
                
                <!-- 新人券 -->
                <div class="coupon-card" style="border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; position: relative; overflow: hidden; border-left: 4px solid #26a69a;">
                    <!-- 首单奖励角标 -->
                    <div style="position: absolute; top: -5px; right: -35px; background-color: #26a69a; color: white; padding: 15px 40px 2px 40px; transform: rotate(45deg); font-size: 12px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">首单奖励</div>
                    
                    <div class="coupon-content" style="padding: 15px;">
                        <div class="coupon-left">
                            <div class="coupon-amount" style="color: #26a69a; font-size: 24px; font-weight: bold;">¥500</div>
                            <div class="coupon-condition" style="font-size: 14px; color: #666; margin-top: 5px;">无使用门槛</div>
                            <div class="coupon-validity" style="font-size: 13px; color: #26a69a; margin-top: 6px; font-weight: bold;">新用户专享特权</div>
                        </div>
                        <div class="coupon-right">
                            <button class="coupon-use-btn btn-click-effect" style="background-color: #26a69a; border: none; border-radius: 20px; padding: 8px 15px; color: white; font-size: 14px;">立即使用</button>
                        </div>
                    </div>
                    <div class="coupon-footer" style="background-color: #f7f7f7; padding: 10px 15px; border-top: 1px dashed #e0e0e0; border-radius: 0 0 12px 12px;">
                        <div class="coupon-details" onclick="toggleDetails(this)">
                            使用规则 <i class="fas fa-chevron-down rotate-transition"></i>
                        </div>
                        <div class="coupon-details-content transition-height">
                            <div class="coupon-detail-item">- 新用户专享</div>
                            <div class="coupon-detail-item">- 仅限首单使用</div>
                            <div class="coupon-detail-item">- 不可与其他优惠同时使用</div>
                        </div>
                    </div>
                </div>
                
                <!-- 运费券 -->
                <div class="coupon-card" style="border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; border-left: 4px solid #26a69a;">
                    <div class="coupon-content" style="padding: 15px;">
                        <div class="coupon-left">
                            <div class="coupon-amount" style="color: #26a69a; font-size: 24px; font-weight: bold;">¥200</div>
                            <div class="coupon-condition" style="font-size: 14px; color: #666; margin-top: 5px;">免运费</div>
                            <div class="coupon-validity" style="font-size: 13px; color: #888; margin-top: 6px;">有效期至：2023-12-15</div>
                        </div>
                        <div class="coupon-right">
                            <button class="coupon-use-btn btn-click-effect" style="background-color: #26a69a; border: none; border-radius: 20px; padding: 8px 15px; color: white; font-size: 14px;">立即使用</button>
                        </div>
                    </div>
                    <div class="coupon-footer" style="background-color: #f7f7f7; padding: 10px 15px; border-top: 1px dashed #e0e0e0; border-radius: 0 0 12px 12px;">
                        <div class="coupon-details" onclick="toggleDetails(this)">
                            使用规则 <i class="fas fa-chevron-down rotate-transition"></i>
                        </div>
                        <div class="coupon-details-content transition-height">
                            <div class="coupon-detail-item">- 全场通用</div>
                            <div class="coupon-detail-item">- 订单金额满1000元可用</div>
                            <div class="coupon-detail-item">- 可与其他优惠券同时使用</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 已使用/已过期优惠券列表 -->
        <div class="coupons-container" id="usedCoupons" style="display: none;" style="margin-top: 14px;">
            <div class="coupon-list">
                <!-- 已使用的优惠券 -->
                <div class="coupon-card coupon-card-used">
                    <div class="coupon-watermark">已使用</div>
                    <div class="coupon-content">
                        <div class="coupon-left">
                            <div class="coupon-amount">¥300</div>
                            <div class="coupon-condition">满4500元使用</div>
                            <div class="coupon-validity">使用时间：2023-11-20</div>
                        </div>
                        <div class="coupon-right">
                            <div class="coupon-status">已使用</div>
                        </div>
                    </div>
                    <div class="coupon-footer">
                        <div class="coupon-details" onclick="toggleDetails(this)">
                            使用规则 <i class="fas fa-chevron-down rotate-transition"></i>
                        </div>
                        <div class="coupon-details-content transition-height">
                            <div class="coupon-detail-item">- 仅限家具类商品使用</div>
                            <div class="coupon-detail-item">- 不可与其他优惠同时使用</div>
                        </div>
                    </div>
                </div>
                
                <!-- 已过期的优惠券 -->
                <div class="coupon-card coupon-card-expired" style="position: relative; overflow: hidden; border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; border-left: 4px solid #999;">
                    <div class="coupon-watermark">已过期</div>
                    <!-- 添加首单奖励标签 -->
                    <div style="position: absolute; top: -5px; right: -35px; background-color: #999; color: white; padding: 15px 40px 2px 40px; transform: rotate(45deg); font-size: 12px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">首单奖励</div>
                    <div class="coupon-content" style="padding: 15px;">
                        <div class="coupon-left">
                            <div class="coupon-amount" style="color: #999; font-size: 24px; font-weight: bold;">¥500</div>
                            <div class="coupon-condition" style="font-size: 14px; color: #999; margin-top: 5px;">无使用门槛</div>
                            <div class="coupon-validity" style="font-size: 13px; color: #999; margin-top: 6px;">过期时间：2023-11-15</div>
                        </div>
                        <div class="coupon-right">
                            <div class="coupon-status" style="color: #999; font-size: 14px;">已过期</div>
                        </div>
                    </div>
                    <div class="coupon-footer" style="background-color: #f7f7f7; padding: 10px 15px; border-top: 1px dashed #e0e0e0; border-radius: 0 0 12px 12px;">
                        <div class="coupon-details" onclick="toggleDetails(this)">
                            使用规则 <i class="fas fa-chevron-down rotate-transition"></i>
                        </div>
                        <div class="coupon-details-content transition-height">
                            <div class="coupon-detail-item">- 新用户专享</div>
                            <div class="coupon-detail-item">- 仅限首单使用</div>
                        </div>
                    </div>
                </div>
                
                <!-- 已过期的优惠券 -->
                <div class="coupon-card coupon-card-expired" style="border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; border-left: 4px solid #999;">
                    <div class="coupon-watermark">已过期</div>
                    <div class="coupon-content" style="padding: 15px;">
                        <div class="coupon-left">
                            <div class="coupon-amount" style="color: #999; font-size: 24px; font-weight: bold;">¥200</div>
                            <div class="coupon-condition" style="font-size: 14px; color: #999; margin-top: 5px;">免运费</div>
                            <div class="coupon-validity" style="font-size: 13px; color: #999; margin-top: 6px;">过期时间：2023-10-31</div>
                        </div>
                        <div class="coupon-right">
                            <div class="coupon-status" style="color: #999; font-size: 14px;">已过期</div>
                        </div>
                    </div>
                    <div class="coupon-footer" style="background-color: #f7f7f7; padding: 10px 15px; border-top: 1px dashed #e0e0e0; border-radius: 0 0 12px 12px;">
                        <div class="coupon-details" onclick="toggleDetails(this)">
                            使用规则 <i class="fas fa-chevron-down rotate-transition"></i>
                        </div>
                        <div class="coupon-details-content transition-height">
                            <div class="coupon-detail-item">- 全场通用</div>
                            <div class="coupon-detail-item">- 订单金额满1000元可用</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 空状态显示 -->
        <div class="empty-state fade-in" style="display: none;" id="emptyState">
            <div class="empty-icon">
                <i class="fas fa-ticket-alt"></i>
            </div>
            <div class="empty-text">暂无可用优惠券</div>
    
            <!-- 新增：推荐优惠券区域 -->
            <div class="recommended-coupons" style="margin-top: 20px;">
                <div class="recommended-title">
                    <span class="rec-line"></span>
                    <span class="rec-text">推荐优惠券</span>
                    <span class="rec-line"></span>
                </div>
                
                <div class="recommended-list" id="recommendedList">
                    <!-- 推荐优惠券项 -->
                    <div class="recommended-item" style="border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 10px; border-left: 4px solid #26a69a; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div class="rec-coupon-left">
                            <div class="rec-amount" style="color: #26a69a; font-size: 18px; font-weight: bold;">¥300</div>
                            <div class="rec-condition" style="font-size: 13px; color: #666; margin-top: 3px;">满4500元使用</div>
                        </div>
                        <div class="rec-coupon-right">
                            <button class="get-coupon-btn btn-click-effect" style="background-color: #26a69a; border: none; border-radius: 15px; padding: 6px 12px; color: white; font-size: 13px;">立即领取</button>
                        </div>
                    </div>
                    
                    <div class="recommended-item" style="border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 10px; position: relative; overflow: hidden; border-left: 4px solid #ff9800; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center;">
                        <!-- 添加首单奖励标签 -->
                        <div style="position: absolute; top: -5px; right: -35px; background-color: #ff9800; color: white; padding: 15px 40px 2px 40px; transform: rotate(45deg); font-size: 10px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">首单奖励</div>
                        <div class="rec-coupon-left">
                            <div class="rec-amount" style="color: #ff9800; font-size: 18px; font-weight: bold;">¥500</div>
                            <div class="rec-condition" style="font-size: 13px; color: #666; margin-top: 3px;">新人专享</div>
                        </div>
                        <div class="rec-coupon-right">
                            <button class="get-coupon-btn btn-click-effect" style="background-color: #ff9800; border: none; border-radius: 15px; padding: 6px 12px; color: white; font-size: 13px;">立即领取</button>
                        </div>
                    </div>
                    
                    <div class="recommended-item" style="border-radius: 12px; border: 1px solid #e0e0e0; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 10px; border-left: 4px solid #26a69a; padding: 12px 15px; display: flex; justify-content: space-between; align-items: center;">
                        <div class="rec-coupon-left">
                            <div class="rec-amount" style="color: #26a69a; font-size: 18px; font-weight: bold;">¥200</div>
                            <div class="rec-condition" style="font-size: 13px; color: #666; margin-top: 3px;">免运费</div>
                        </div>
                        <div class="rec-coupon-right">
                            <button class="get-coupon-btn btn-click-effect" style="background-color: #26a69a; border: none; border-radius: 15px; padding: 6px 12px; color: white; font-size: 13px;">立即领取</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 底部导航栏 -->
    <!-- <div class="tab-bar">
        <a href="home.html" class="tab-item">
            <div class="tab-icon tab-inactive"><i class="fas fa-home"></i></div>
            <div class="tab-label tab-inactive">首页</div>
        </a>
        <a href="category.html" class="tab-item">
            <div class="tab-icon tab-inactive"><i class="fas fa-th-large"></i></div>
            <div class="tab-label tab-inactive">分类</div>
        </a>
        <a href="cart.html" class="tab-item">
            <div class="tab-icon tab-inactive"><i class="fas fa-shopping-cart"></i></div>
            <div class="tab-label tab-inactive">购物车</div>
        </a>
        <a href="profile.html" class="tab-item">
            <div class="tab-icon tab-active"><i class="fas fa-user"></i></div>
            <div class="tab-label tab-active">我的</div>
        </a>
    </div> -->
    
    <!-- 引入模块化的JS文件 -->
    <script src="../js/coupon-types.js"></script>
    <script src="../js/coupon.js"></script>
    
    <!-- 测试按钮功能 -->
    <script>
        // 等待文档加载完成
        document.addEventListener('DOMContentLoaded', function() {
            // 获取测试按钮元素
            const toggleEmptyBtn = document.getElementById('toggleEmptyBtn');
            
            // 添加点击事件
            if (toggleEmptyBtn) {
                toggleEmptyBtn.addEventListener('click', function() {
                    // 获取元素
                    const availableCoupons = document.getElementById('availableCoupons');
                    const emptyState = document.getElementById('emptyState');
                    
                    // 检查空状态是否显示
                    const isEmptyVisible = window.getComputedStyle(emptyState).display !== 'none';
                    
                    if (isEmptyVisible) {
                        // 如果当前显示空状态，切换回优惠券列表
                        emptyState.style.display = 'none';
                        availableCoupons.style.display = 'block';
                        this.textContent = '测试空状态';
                        this.classList.remove('bg-red-500');
                        this.classList.add('bg-green-600');
                    } else {
                        // 如果当前显示优惠券列表，切换到空状态
                        emptyState.style.display = 'flex';
                        availableCoupons.style.display = 'none';
                        this.textContent = '返回列表';
                        this.classList.remove('bg-green-600');
                        this.classList.add('bg-red-500');
                    }
                });
            }
        });
    </script>
</body>
</html> 
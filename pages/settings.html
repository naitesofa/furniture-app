<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>设置 - 家逸生活</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="../css/common.css" rel="stylesheet">
    <link href="../css/scrollbar.css" rel="stylesheet">
    <style>
        /* 主题颜色变量 - 与首页保持一致 */
        :root {
            --primary-color: #2A9D8F;
            --secondary-color: #E9C46A;
            --accent-color: #F4A261;
            --dark-color: #264653;
            --light-color: #F8F9FA;
            --bg-color: #F5F7F8;
            
            /* 完整品牌色彩系统 */
            --brand-primary: #2A9D8F;
            --brand-primary-light: #4DB6A9;
            --brand-primary-dark: #1F7A70;
            --brand-primary-transparent: rgba(42, 157, 143, 0.1);
            
            --brand-secondary: #E9C46A;
            --brand-secondary-light: #F2D68B;
            --brand-secondary-dark: #D4A93B;
            
            --brand-accent: #F4A261;
            --brand-accent-light: #F7BE8C;
            --brand-accent-dark: #E68940;
            
            --brand-dark: #264653;
            --brand-dark-light: #3A6A7E;
            --brand-dark-dark: #1A323C;
            
            --brand-light: #F8F9FA;
            --brand-light-dark: #E9ECEF;
            
            --brand-success: #38B2AC;
            --brand-warning: #F59E0B;
            --brand-error: #EF4444;
            --brand-info: #3B82F6;
        }

        body {
            background-color: var(--bg-color);
            color: var(--brand-dark);
        }

        .nav-bar {
            background: var(--brand-primary);
            box-shadow: var(--shadow-md);
        }
        
        .menu-item {
            border-bottom: 1px solid var(--brand-light-dark);
            transition: all 0.3s ease;
        }
        
        .menu-item:hover {
            background-color: var(--brand-primary-transparent);
        }
        
        .btn-press {
            cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .btn-press:active {
            transform: scale(0.95);
        }
        
        .btn-primary {
            background-color: var(--brand-primary);
            color: white;
            border-radius: 8px;
            padding: 12px 20px;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: var(--brand-primary-dark);
        }
        
        .form-input {
            border: 1px solid var(--brand-light-dark);
            border-radius: 8px;
            padding: 12px 16px;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            border-color: var(--brand-primary);
            outline: none;
            box-shadow: 0 0 0 3px var(--brand-primary-transparent);
        }
        
        /* 弹窗样式 */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .modal.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 12px;
            max-width: 90%;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            padding: 24px;
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }
        
        .modal.active .modal-content {
            transform: translateY(0);
        }
        
        /* 开关按钮样式 */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 28px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background-color: var(--brand-primary);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        /* 个人信息卡片样式 */
        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            overflow: hidden;
            border: 2px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .profile-info-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--brand-light-dark);
        }
        
        .profile-info-item:last-child {
            border-bottom: none;
        }
        
        .profile-info-label {
            width: 80px;
            color: var(--brand-dark-light);
            font-size: 14px;
        }
        
        .profile-info-value {
            flex: 1;
            color: var(--brand-dark);
            font-size: 14px;
        }
    </style>
</head>
<body class="bg-gray-50 pb-20">
    <!-- 顶部导航栏 -->
    <div class="nav-bar fixed top-0 left-0 right-0 z-10">
        <div class="flex items-center justify-between px-4 h-12">
            <div class="flex items-center">
                <a href="profile.html" class="text-white">
                    <i class="fas fa-arrow-left"></i>
                </a>
                <div class="text-lg font-medium text-white ml-4">设置</div>
            </div>
        </div>
    </div>
    
    <!-- 主要内容区域 -->
    <div class=" px-4" style="padding-top: 3rem;">
        <!-- 个人信息设置 -->
        <div class="bg-white rounded-lg mt-4 overflow-hidden">
            <div class="px-4 py-2 font-medium text-gray-700">个人信息</div>
            
            <a href="edit-profile-info.html" class="menu-item px-4 py-3 btn-press">
                <div class="flex items-center justify-between">
                    <div class="flex items-center">
                        <div class="user-avatar mr-3">
                            <img src="https://images.unsplash.com/photo-1580489944761-15a19d654956?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80" alt="用户头像" class="w-full h-full object-cover" id="user-avatar-preview">
                        </div>
                        <div>
                            <div class="profile-info-item py-1">
                                <div class="profile-info-label">昵称</div>
                                <div class="profile-info-value" id="user-nickname">李小明</div>
                            </div>
                            <div class="profile-info-item py-1">
                                <div class="profile-info-label">手机号</div>
                                <div class="profile-info-value" id="user-phone">138****1234</div>
                            </div>
                        </div>
                    </div>
                    <i class="fas fa-angle-right text-gray-400"></i>
                </div>
            </a>
            
            <a href="address.html" class="menu-item flex items-center justify-between px-4 py-3 btn-press">
                <div class="flex items-center">
                    <i class="fas fa-map-marker-alt text-brand-primary w-6"></i>
                    <span class="ml-3">收货地址</span>
                </div>
                <i class="fas fa-angle-right text-gray-400"></i>
            </a>
            
        </div>
        
      
        <!-- 隐私与安全 -->
        <div class="bg-white rounded-lg mt-4 overflow-hidden">
            <div class="px-4 py-3 font-medium text-gray-700">隐私与安全</div>
            
            <a href="javascript:void(0)" onclick="showModal('privacy-policy')" class="menu-item flex items-center justify-between px-4 py-3 btn-press">
                <div class="flex items-center">
                    <i class="fas fa-shield-alt text-brand-primary w-6"></i>
                    <span class="ml-3">隐私政策</span>
                    </div>
                <i class="fas fa-angle-right text-gray-400"></i>
            </a>
            
            <a href="javascript:void(0)" onclick="showModal('user-agreement')" class="menu-item flex items-center justify-between px-4 py-3 btn-press border-b-0">
                <div class="flex items-center">
                    <i class="fas fa-file-contract text-brand-primary w-6"></i>
                    <span class="ml-3">用户协议</span>
                </div>
                <i class="fas fa-angle-right text-gray-400"></i>
            </a>
        </div>
        
        <!-- 帮助与支持 -->
        <div class="bg-white rounded-lg mt-4 overflow-hidden">
            <div class="px-4 py-3 font-medium text-gray-700">帮助与支持</div>
            
            <a href="javascript:void(0)" onclick="showModal('feedback')" class="menu-item flex items-center justify-between px-4 py-3 btn-press">
                <div class="flex items-center">
                    <i class="fas fa-comment-alt text-brand-primary w-6"></i>
                    <span class="ml-3">意见反馈</span>
                    </div>
                <i class="fas fa-angle-right text-gray-400"></i>
            </a>
            
            <a href="customer-service.html" class="menu-item flex items-center justify-between px-4 py-3 btn-press">
                <div class="flex items-center">
                    <i class="fas fa-headset text-brand-primary w-6"></i>
                    <span class="ml-3">联系客服</span>
                </div>
                <i class="fas fa-angle-right text-gray-400"></i>
            </a>
            
        </div>
        
        <!-- 关于 -->
        <div class="bg-white rounded-lg mt-4 overflow-hidden">
            <div class="px-4 py-3 font-medium text-gray-700">关于</div>
            
            <div class="menu-item flex items-center justify-between px-4 py-3">
                <div class="flex items-center">
                    <i class="fas fa-info-circle text-brand-primary w-6"></i>
                    <span class="ml-3">版本信息</span>
                </div>
                <span class="text-gray-400">v1.0.0</span>
                    </div>
            
            <a href="javascript:void(0)" onclick="showModal('about-us')" class="menu-item flex items-center justify-between px-4 py-3 btn-press border-b-0">
                <div class="flex items-center">
                    <i class="fas fa-building text-brand-primary w-6"></i>
                    <span class="ml-3">关于我们</span>
                </div>
                <i class="fas fa-angle-right text-gray-400"></i>
            </a>
        </div>
        
        <!-- 退出登录按钮 -->
        <div class="mt-8 px-4">
            <button class="btn-primary w-full py-3 btn-press" onclick="logout()">退出登录</button>
        </div>
        
        <!-- 账号注销按钮 -->
        <div class="mt-4 px-4 mb-8">
            <button class="bg-white border border-gray-300 text-gray-700 w-full py-3 rounded-lg btn-press" onclick="showModal('account-cancellation')">账号注销</button>
        </div>
    </div>
    
    <!-- 隐私政策弹窗 -->
    <div id="privacy-policy" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">隐私政策</h3>
                <button onclick="closeModal('privacy-policy')" class="text-gray-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <h4 class="font-medium mb-2">麦吉纳家居小程序隐私政策</h4>
                <p class="text-gray-600 mb-2">本隐私政策版本更新日期：2025 年 4 月 23 日</p>
                <p class="text-gray-600 mb-4">本隐私政策版本生效日期：2025 年 4 月 23 日</p>
                
                <p class="text-gray-600 mb-4">天津麦吉纳家居科技有限公司（注册地址：天津市宝坻区方家庄镇产业功能区一期（天津市耐特家具有限公司院内），联系方式：16622168447）非常重视用户个人信息的保护，在您使用麦吉纳家居小程序（以下简称 "麦吉纳家居" 或 "我们"）的服务时，我们将按照本隐私政策收集、使用、存储及共享您的个人信息。请您在使用麦吉纳家居小程序前，仔细阅读并充分理解本隐私政策，在确认充分理解并同意后使用相关服务。如果您不同意本隐私政策的任何内容，您应立即停止使用麦吉纳家居小程序服务。当您使用我们提供的任一服务时，即表示您已同意我们按照本隐私政策来收集、使用、存储和共享您的相关信息。</p>
                
                <h4 class="font-medium mb-2">一、我们如何收集和使用您的个人信息</h4>
                <p class="text-gray-600 mb-2">个人信息是指以电子或者其他方式记录的能够单独或者与其他信息结合识别特定自然人身份或者反映特定自然人活动情况的各种信息。我们仅会出于本隐私政策所述的以下目的，收集和使用您的个人信息：</p>
                
                <h5 class="font-medium mb-1">（一）为您提供基础服务</h5>
                <p class="text-gray-600 mb-2">1. 注册及登录：您可以通过微信授权登录麦吉纳家居小程序，在您授权同意后，我们会收集您的微信昵称、头像，用于展示您的个人信息，以便您在小程序内进行互动交流等操作。若您拒绝提供，您将无法通过微信授权方式登录小程序，但不影响您以其他方式注册和使用小程序的部分功能。</p>
                <p class="text-gray-600 mb-4">2. 商品购买及服务预约<br>
                   为了完成商品购买流程以及处理售后问题，如预约送货、安装、家具清洗或者维修服务，在您下单时，我们会收集您的姓名、联系方式、地址（配送、安装、家具清洗或维修地址）、服务时间等基础信息。若您不提供这些信息，我们将无法为您处理订单及安排相应服务。<br>
                   在您使用我们的产品或服务过程中，为及时识别您账号或设备的异常问题并及时解决，我们会收集您的使用情况并存储为网络日志信息，包括相关设备的唯一设备标识符、MAC 地址、IP 地址、操作系统版本以及用于访问服务的设备的设置。单独的设备信息、服务日志信息是无法识别特定自然人的身份信息。若我们将这类信息与其他信息结合用于识别特定自然人身份，或者将其与其他个人信息结合使用，在结合使用期间，这类信息将被视为个人信息，除取得您授权或法律法规另有规定外，我们会将这类信息做匿名化或去标识化处理。</p>
                
                <h5 class="font-medium mb-1">（二）为您提供个性化服务</h5>
                <p class="text-gray-600 mb-4">1. 位置服务：当您下单填写收件地址时，我们会获取您选择的位置信息，以便准确为您配送商品或提供上门服务。您可以通过手机系统设置随时关闭位置信息授权，关闭后可能影响您便捷地填写收货地址，但不影响小程序其他功能的使用。</p>
                <p class="text-gray-600 mb-4">2. 搜索与咨询辅助<br>
                   为方便您快速粘贴内容进行搜索，我们会读取您的剪切板信息。该操作仅在您主动进行搜索相关操作时触发，剪切板数据仅用于本次搜索行为，实时内存处理，不持久化存储。<br>
                   若您希望使用语音搜索或快速咨询客服问题，在您明示同意后，我们将访问您的麦克风，将您的语音转换为文字以实现相应功能。您可以随时在小程序设置中撤回对麦克风的授权，撤回后将无法使用语音相关功能。</p>
                
                <p class="text-gray-600 mb-2">更多隐私政策内容请点击"查看完整隐私政策"。</p>
            </div>
            <div class="mt-6 flex flex-col gap-2">
                <a href="隐私政策.html" class="text-center text-primary underline">查看完整隐私政策</a>
                <button onclick="closeModal('privacy-policy')" class="btn-primary w-full">关闭</button>
            </div>
        </div>
    </div>
    
    <!-- 用户协议弹窗 -->
    <div id="user-agreement" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">用户协议</h3>
                <button onclick="closeModal('user-agreement')" class="text-gray-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <h4 class="font-medium mb-2">麦吉纳家居小程序用户协议</h4>
                <p class="text-gray-600 mb-4">麦吉纳家居小程序（以下简称"本小程序"）由天津麦吉纳家居科技有限公司（以下简称"开发者"）提供。在使用本小程序之前，请您仔细阅读并同意本用户协议（以下简称"本协议"）。如果您不同意本协议的任何内容，请停止使用本小程序。</p>
                
                <h5 class="font-medium mb-1">一、目录</h5>
                <p class="text-gray-600 mb-2">
                1. 用户接受协议<br>
                2. 用户注册和账号<br>
                3. 用户行为规范<br>
                4. 隐私保护<br>
                5. 交易相关<br>
                6. 知识产权<br>
                7. 配送特别条款<br>
                8. 未成年人使用<br>
                9. 免责条款<br>
                10. 协议的修改与更新<br>
                11. 终止使用<br>
                12. 其他
                </p>
                
                <h5 class="font-medium mb-1">二、用户接受协议</h5>
                <p class="text-gray-600 mb-4">1.1 在使用本小程序之前，您必须阅读并接受本协议的全部条款，以及可能随时更新的隐私政策和其他相关规则。如果您对本协议或其他相关规则有异议，请立即停止使用本小程序。</p>
                
                <h5 class="font-medium mb-1">三、用户注册和账号</h5>
                <p class="text-gray-600 mb-2">2.1 您可通过以下两种方式完成注册：</p>
                <p class="text-gray-600 mb-4">
                 授权使用微信信息完成注册；<br>
                 使用手机号短信验证完成注册。<br>
                注册成功后，您应自行负责保管账户信息及相关设备，并对其账户中的所有活动和事件负全部法律责任。包括因依赖账户内内容的正确性、完整性或实用性而产生的风险，开发者不对因前述风险导致的任何损失或损害承担责任。
                </p>
                
                <p class="text-gray-600 mb-4">2.2 您的账户信息仅限本人使用，不得赠与、出借、转让、出售或以其他方式许可他人使用。若发现以下违规行为，开发者将采取相应措施：<br>
                 首次违规：发送站内信警告，并限制部分非核心功能使用3天；<br>
                 二次违规：暂停账户使用7天；<br>
                 三次及以上违规：永久封禁账户。<br>
                此外，您应妥善保管账户信息，如因信息泄露或借予他人使用导致的后果，均由您自行承担。任何以您账户使用本小程序服务的行为，均视为您的个人合法使用行为。</p>
                
                <p class="text-gray-600 mb-2">更多用户协议内容请点击"查看完整用户协议"。</p>
            </div>
            <div class="mt-6 flex flex-col gap-2">
                <a href="用户协议.html" class="text-center text-primary underline">查看完整用户协议</a>
                <button onclick="closeModal('user-agreement')" class="btn-primary w-full">关闭</button>
            </div>
        </div>
    </div>
    
    <!-- 意见反馈弹窗 -->
    <div id="feedback" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">意见反馈</h3>
                <button onclick="closeModal('feedback')" class="text-gray-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <!-- 反馈类型选择器 - 微信风格选项卡 -->
                <div class="mb-5">
                    <div class="bg-gray-100 rounded-md overflow-hidden">
                        <div class="flex w-full feedback-tabs">
                            <div class="feedback-tab active py-2.5 px-3 text-center flex-1" data-type="功能建议">功能建议</div>
                            <div class="feedback-tab py-2.5 px-3 text-center flex-1" data-type="问题反馈">问题反馈</div>
                            <div class="feedback-tab py-2.5 px-3 text-center flex-1" data-type="体验改进">体验改进</div>
                            <div class="feedback-tab py-2.5 px-3 text-center flex-1" data-type="其他">其他</div>
                        </div>
                    </div>
                    <input type="hidden" id="feedback-type" value="功能建议">
                </div>
                
                <!-- 反馈内容 - 微信风格输入框 -->
                <div class="mb-5">
                    <div class="bg-gray-100 rounded-md p-3 relative">
                        <textarea class="bg-transparent w-full border-0 outline-none resize-none" rows="4" placeholder="请详细描述您的问题或建议..." id="feedback-content"></textarea>
                        <div class="text-right text-xs text-gray-400 mt-1">
                            <span id="char-count">0</span>/200
                        </div>
                    </div>
                </div>
                
                <!-- 联系方式 - 微信风格输入框 -->
                <div class="mb-5">
                    <div class="flex items-center justify-between mb-1 text-sm">
                        <span class="text-gray-700">联系方式（选填）</span>
                    </div>
                    <div class="bg-gray-100 rounded-md">
                        <input type="text" class="bg-transparent w-full border-0 outline-none p-3" placeholder="请留下您的联系方式" id="feedback-contact">
                    </div>
                </div>
                
                <!-- 图片上传 - 微信风格 -->
                <div class="mb-4">
                    <div class="flex items-center justify-between mb-1 text-sm">
                        <span class="text-gray-700">上传截图（选填，最多3张）</span>
                        <span class="text-xs text-gray-400"><span id="image-count">0</span>/3</span>
                    </div>
                    <div class="flex flex-wrap">
                        <div id="image-preview-container" class="flex flex-wrap">
                            <!-- 动态插入预览图片 -->
                        </div>
                        <div id="add-image" class="bg-gray-100 rounded-md flex items-center justify-center cursor-pointer">
                            <i class="fas fa-plus text-gray-400"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mt-6">
                <button id="submit-feedback-btn" class="btn-primary w-full rounded-md py-2.5" onclick="submitFeedback()">提交反馈</button>
            </div>
        </div>
    </div>
    
    <!-- 关于我们弹窗 -->
    <div id="about-us" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">关于我们</h3>
                <button onclick="closeModal('about-us')" class="text-gray-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="w-20 h-20 rounded-lg bg-primary mx-auto mb-4 flex items-center justify-center">
                    <i class="fas fa-couch text-white text-3xl"></i>
                </div>
                <h4 class="text-xl font-bold mb-2 text-center">麦吉纳家居</h4>
                <p class="text-gray-600 mb-4 text-center">匠心铸就品质 科技创造生活</p>
                
                <div class="mt-6 space-y-4 text-gray-600">
                    <p>在岁月的沉淀与时代的浪潮中，天津麦吉纳家居科技有限公司应运而生，自 2018 年正式成立以来，始终以匠心精神深耕家居领域。其生产基地 —— 天津市耐特家具，更是承载着四十余载的深厚底蕴，自 1980 年创立，历经时光淬炼，在不断创新与变革中，发展成为集设计、生产、销售于一体的专业沙发与家具制造典范。</p>
                    
                    <p>凭借对品质的执着追求与市场趋势的敏锐洞察，公司打造了线上品牌 "麦吉纳" 与线下品牌 "夏凡尼"，双线并行，满足不同客户群体的多样化需求。如今，我们的经销商网络如璀璨星河，遍布祖国大江南北，将高品质家居产品与服务，源源不断地输送到千家万户。</p>
                    
                    <p>天津耐特家具有限公司作为麦吉纳家居小程序背后强大的生产支柱，在家具制造领域拥有深厚的技术积累与卓越的创新实力，这突出体现在其斩获的 193 项专利成果上。这些专利成果不仅是技术实力的证明，更是融入每一款产品，从人性化的功能设计，到独特新颖的外观造型，处处彰显科技与美学的融合，为用户带来更舒适、更便捷、更具品质感的家居体验。</p>
                    
                    <p>麦吉纳家居小程序作为线上服务的重要窗口，始终秉持 "客户至上" 的核心理念。我们坚持换位思考，深入挖掘客户需求，从用户浏览产品、下单购买，到售后反馈的每一个环节，都以客户视角精心打磨。致力于为客户提供兼具高品质与高性价比的家居产品，无论是时尚简约的现代风格，还是优雅大气的经典款式，每一件产品都经过严格筛选与把控，从原材料采购到生产加工，再到成品检验，层层把关，坚决杜绝偷工减料、以次充好，以诚信之心，打造让客户放心、安心的良心家居。</p>
                    
                    <p>未来，麦吉纳家居将继续传承匠心精神，依托深厚的制造底蕴与创新优势，不断提升产品品质与服务水平，通过麦吉纳家居小程序等多元渠道，为更多客户创造美好家居生活，让每一个家庭都能感受到品质家居带来的温暖与幸福。</p>
                </div>
            </div>
            <div class="mt-6">
                <button onclick="closeModal('about-us')" class="btn-primary w-full">关闭</button>
            </div>
        </div>
    </div>

    <!-- 账号注销弹窗 -->
    <div id="account-cancellation" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold">账号注销</h3>
                <button onclick="closeModal('account-cancellation')" class="text-gray-500">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="mb-6">
                    <i class="fas fa-exclamation-triangle text-yellow-500 text-5xl block mx-auto mb-4"></i>
                    <h4 class="text-lg font-medium text-center mb-4">注销账号将会导致以下内容丢失：</h4>
                    <ul class="text-gray-600 space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-circle text-xs mt-1.5 mr-2 text-gray-400"></i>
                            <span>个人资料信息将被清空</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-circle text-xs mt-1.5 mr-2 text-gray-400"></i>
                            <span>收藏的商品和浏览记录将被删除</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-circle text-xs mt-1.5 mr-2 text-gray-400"></i>
                            <span>购买记录和订单信息将无法查看</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-circle text-xs mt-1.5 mr-2 text-gray-400"></i>
                            <span>账户中的优惠券将作废</span>
                        </li>
                    </ul>
                </div>
                
                <div class="mb-4">
                    <label class="flex items-center">
                        <input type="checkbox" id="cancellation-confirm" class="mr-2">
                        <span class="text-gray-700">我已阅读并理解注销账号的后果</span>
                    </label>
                </div>
                
                
                <div class="mb-4">
                    <label class="block text-gray-700 mb-2">请输入注销原因（选填）</label>
                    <textarea class="form-input" rows="3" placeholder="请告诉我们您注销的原因，帮助我们改进服务..."></textarea>
                </div>
            </div>
            <div class="mt-6">
                <button id="cancel-account-btn" class="w-full py-3 bg-gray-300 text-gray-500 rounded-lg btn-press" disabled onclick="cancelAccount()">确认注销</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const styleEl = document.createElement('style');
            styleEl.textContent = `
                .feedback-tabs {
                    border-radius: 8px;
                    position: relative;
                }
                .feedback-tab {
                    color: #666;
                    position: relative;
                    transition: all 0.25s;
                    font-size: 14px;
                }
                .feedback-tab.active {
                    color: #fff;
                    background-color: var(--brand-primary);
                    font-weight: 500;
                }
                .image-preview {
                    position: relative;
                    width: 80px;
                    height: 80px;
                    margin-right: 8px;
                    margin-bottom: 8px;
                    border-radius: 8px;
                    overflow: hidden;
                }
                #add-image {
                    width: 80px;
                    height: 80px;
                    border-radius: 8px;
                }
                #feedback textarea::placeholder,
                #feedback input::placeholder {
                    color: #999;
                }
                #feedback .modal-content {
                    border-radius: 16px;
                }
            `;
            document.head.appendChild(styleEl);
            
            // 从本地存储加载用户信息
            const userData = JSON.parse(localStorage.getItem('userData') || '{"nickname":"李小明","phone":"138****1234"}');
            
            // 更新用户信息显示
            document.getElementById('user-nickname').textContent = userData.nickname || '李小明';
            document.getElementById('user-phone').textContent = userData.phone || '138****1234';
            
            // 加载用户头像
            const userAvatar = localStorage.getItem('userAvatar');
            if (userAvatar) {
                document.getElementById('user-avatar-preview').src = userAvatar;
            }
            
            // 账号注销复选框事件监听
            const cancellationConfirm = document.getElementById('cancellation-confirm');
            const cancelAccountBtn = document.getElementById('cancel-account-btn');
            
            if (cancellationConfirm && cancelAccountBtn) {
                cancellationConfirm.addEventListener('change', function() {
                    cancelAccountBtn.disabled = !this.checked;
                    cancelAccountBtn.className = this.checked 
                        ? 'w-full py-3 bg-red-500 text-white rounded-lg btn-press' 
                        : 'w-full py-3 bg-gray-300 text-gray-500 rounded-lg btn-press';
                });
            }
            
            // 意见反馈标签页切换
            const feedbackTabs = document.querySelectorAll('.feedback-tab');
            const feedbackTypeInput = document.getElementById('feedback-type');
            
            feedbackTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // 移除所有标签的active类
                    feedbackTabs.forEach(t => t.classList.remove('active'));
                    // 添加当前标签的active类
                    this.classList.add('active');
                    // 更新隐藏输入框的值
                    feedbackTypeInput.value = this.dataset.type;
                });
            });
            
            // 字符计数
            const feedbackContent = document.getElementById('feedback-content');
            const charCount = document.getElementById('char-count');
            
            if (feedbackContent && charCount) {
                feedbackContent.addEventListener('input', function() {
                    const count = this.value.length;
                    charCount.textContent = count;
                    
                    // 如果超过200字符，限制输入
                    if (count > 200) {
                        this.value = this.value.substring(0, 200);
                        charCount.textContent = 200;
                    }
                });
            }
            
            // 图片上传功能
            const addImage = document.getElementById('add-image');
            const previewContainer = document.getElementById('image-preview-container');
            const imageCount = document.getElementById('image-count');
            
            if (addImage && previewContainer && imageCount) {
                addImage.addEventListener('click', function() {
                    const uploadedImagesCount = document.querySelectorAll('.image-preview').length;
                    if (uploadedImagesCount >= 3) {
                        // 显示微信风格的提示
                        showToast('最多只能上传3张图片');
                        return;
                    }
                    
                    // 模拟微信的选择图片界面
                    // 实际项目中应使用微信小程序API: wx.chooseImage
                    simulateChooseImage();
                });
            }
        });
        
        // 模拟微信选择图片
        function simulateChooseImage() {
            // 这里仅作演示，实际应使用wx.chooseImage
            const imgUrl = 'https://images.unsplash.com/photo-1555041469-a586c61ea9bc?ixlib=rb-1.2.1&auto=format&fit=crop&w=300&q=80';
            addImagePreview(imgUrl);
        }
        
        // 添加图片预览
        function addImagePreview(imgUrl) {
            const previewContainer = document.getElementById('image-preview-container');
            const imageCount = document.getElementById('image-count');
            const uploadedImagesCount = document.querySelectorAll('.image-preview').length;
            
            if (uploadedImagesCount >= 3) return;
            
            const previewDiv = document.createElement('div');
            previewDiv.className = 'image-preview';
            
            const img = document.createElement('img');
            img.src = imgUrl;
            img.className = 'w-full h-full object-cover';
            previewDiv.appendChild(img);
            
            const deleteBtn = document.createElement('div');
            deleteBtn.className = 'absolute top-0 right-0 bg-black bg-opacity-50 text-white w-5 h-5 flex items-center justify-center rounded-bl-lg';
            deleteBtn.innerHTML = '<i class="fas fa-times text-xs"></i>';
            deleteBtn.onclick = function(e) {
                e.stopPropagation();
                previewDiv.remove();
                updateImageCount();
            };
            previewDiv.appendChild(deleteBtn);
            
            previewContainer.appendChild(previewDiv);
            updateImageCount();
        }
        
        // 更新图片计数
        function updateImageCount() {
            const count = document.querySelectorAll('.image-preview').length;
            document.getElementById('image-count').textContent = count;
        }
        
        // 显示微信风格的轻提示
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-black bg-opacity-70 text-white px-4 py-2 rounded-lg z-50';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.classList.add('opacity-0');
                toast.style.transition = 'opacity 0.3s';
                setTimeout(() => toast.remove(), 300);
            }, 1500);
        }
        
        function showModal(id) {
            document.getElementById(id).classList.add('active');
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
            document.body.style.overflow = '';
        }
        
        function logout() {
            // 清除登录状态
            localStorage.removeItem('isLoggedIn');
            
            // 跳转到登录页面
            window.location.href = 'login.html';
        }
        
        function submitFeedback() {
            const feedbackType = document.getElementById('feedback-type').value;
            const feedbackContent = document.getElementById('feedback-content').value;
            
            if (!feedbackContent.trim()) {
                showToast('请输入反馈内容');
                return;
            }
            
            // 显示成功提示
            showToast('感谢您的反馈，我们会尽快处理！');
            
            // 关闭弹窗前简单延迟，让用户看到提示
            setTimeout(() => {
                closeModal('feedback');
                
                // 清空表单
                document.getElementById('feedback-content').value = '';
                document.getElementById('feedback-contact').value = '';
                document.getElementById('char-count').textContent = '0';
                document.getElementById('image-preview-container').innerHTML = '';
                document.getElementById('image-count').textContent = '0';
                
                // 重置类型选择
                document.querySelectorAll('.feedback-tab').forEach((tab, index) => {
                    if (index === 0) {
                        tab.classList.add('active');
                    } else {
                        tab.classList.remove('active');
                    }
                });
                document.getElementById('feedback-type').value = '功能建议';
            }, 1500);
        }
        
        function cancelAccount() {
            // 这里应该有实际的账号注销逻辑
            // 显示确认弹窗
            if (confirm('确定要注销账号吗？此操作不可恢复！')) {
                // 清除所有本地存储数据
                localStorage.clear();
                
                // 显示成功提示
                alert('账号已成功注销，感谢您使用我们的服务');
                
                // 跳转到登录页面
                window.location.href = 'login.html';
            }
        }
    </script>
</body>
</html> 